# 仓库管理页面排序功能测试提示词

## Playwright MCP 测试提示词

请使用Playwright MCP工具对 http://localhost:9528/#/master/warehouse 页面的列表排序功能进行全面测试，包含错误检测和详细报告。

### 登录信息
- 用户名：administrator  
- 密码：654321
- 验证码：1

## 测试执行流程（8阶段 + 错误检测）

### Phase 1: 环境准备与错误监控初始化
1. 使用 browser_navigate 访问页面并完成登录
2. 处理登录后的错误对话框（已知系统BUG）
3. 初始化错误监控：
   - 启用浏览器控制台日志捕获
   - 设置JavaScript错误监听
   - 开启网络请求监控
4. 验证页面加载完成状态
5. 记录初始页面状态作为基准

**错误检测点**：
- 页面加载JavaScript错误
- 登录流程异常
- 初始数据加载失败
- 控制台错误信息

### Phase 2: 文本字段排序测试（含错误检测）
测试字段：warehouse_code（仓库编码）、warehouse_name（仓库名称）、warehouse_short_name（仓库简称）

每个字段执行：
1. 点击列头进行升序排序
2. **错误检测**：检查是否有JavaScript错误、网络请求失败、UI冻结
3. 验证排序结果正确性
4. 点击列头进行降序排序
5. **错误检测**：重复错误检查
6. 验证排序结果正确性
7. 再次点击恢复默认排序
8. **错误监控**：记录整个排序周期的性能数据

**报告要求**：
- 每个字段排序的响应时间
- 任何JavaScript错误的详细堆栈信息
- 网络请求状态和响应时间
- 排序准确性验证结果

### Phase 3: 地理字段排序测试（含错误检测）
测试字段：province（省份）、city（城市）、district（区县）、address（地址）

执行步骤同Phase 2，额外关注：
**错误检测点**：
- 中文字符排序异常
- Unicode编码问题
- 地理数据排序逻辑错误

**报告要求**：
- 中文排序是否按拼音或笔画正确排序
- 特殊字符和空值处理是否正确

### Phase 4: 数值字段排序测试（含错误检测）
测试字段：sort（排序）、dbversion（版本）

特别关注：
**错误检测点**：
- 数值排序逻辑错误（字符串排序vs数值排序）
- 空值和null值处理异常
- 大数值精度丢失

**报告要求**：
- 数值排序准确性验证
- 边界值处理结果
- 性能对比分析

### Phase 5: 企业字段排序测试（含错误检测）
测试字段：org_id（组织ID）、org_code（组织编码）、org_name（组织名称）

**错误检测点**：
- 关联数据加载失败
- 企业权限相关错误
- 组织层级排序异常

### Phase 6: 时间和人员字段排序测试（含错误检测）
测试字段：c_time（创建时间）、u_time（修改时间）、c_name（创建人）、u_name（修改人）

**错误检测点**：
- 时间格式解析错误
- 时区处理异常
- 人员信息加载失败
- 日期排序逻辑错误

**报告要求**：
- 时间排序的精确性验证
- 时区一致性检查
- 人员字段排序逻辑验证

### Phase 7: 高级场景测试（含错误检测）
1. **排序 + 搜索组合**：
   - 设置搜索条件后进行排序
   - **错误检测**：搜索结果排序是否正确，有无数据丢失

2. **排序 + 分页组合**：
   - 排序后翻页验证排序持续性
   - **错误检测**：跨页排序一致性，分页状态异常

3. **快速连续排序**：
   - 快速点击不同列进行排序切换
   - **错误检测**：竞争条件，请求冲突，UI状态混乱

**报告要求**：
- 组合场景的完整性验证
- 性能压力下的稳定性报告
- 用户体验评估

### Phase 8: 异常和边界测试（含错误检测）
1. **无数据场景**：空列表排序
2. **单条数据场景**：仅一条记录的排序
3. **大数据量场景**：如果有大量数据的排序性能
4. **网络异常模拟**：排序请求过程中的网络中断

**错误检测点**：
- 边界条件下的系统崩溃
- 内存泄漏或性能降级
- 异常情况的用户提示

### Phase 9: 错误检测与报告汇总
1. **浏览器控制台错误汇总**：
   - JavaScript错误统计
   - 警告信息分类
   - 性能警告分析

2. **网络请求分析**：
   - 失败请求统计
   - 响应时间分析
   - 请求参数验证

3. **UI状态验证**：
   - 排序指示器状态检查
   - 表格渲染完整性
   - 用户交互响应性

4. **性能监控报告**：
   - 各阶段耗时统计
   - 内存使用情况
   - CPU负载分析

## 排序字段详情

### 可排序字段（19个）
基于源码分析 `src/views/30_wms/warehouse/page/10_list/index.vue`，以下字段支持排序：

1. **基础信息字段**：
   - warehouse_code（仓库编码）
   - warehouse_name（仓库名称）
   - warehouse_short_name（仓库简称）

2. **地理位置字段**：
   - province（省份）
   - city（城市）
   - district（区县）
   - address（地址）

3. **数值字段**：
   - sort（排序）
   - dbversion（版本）

4. **企业相关字段**：
   - org_id（组织ID）
   - org_code（组织编码）
   - org_name（组织名称）

5. **时间和人员字段**：
   - c_time（创建时间）
   - u_time（修改时间）
   - c_name（创建人）
   - u_name（修改人）

6. **其他字段**：
   - warehouse_type_name（仓库类型）
   - enabled_name（启用状态）
   - remark（备注）

### 不可排序字段（2个）
- No（序号）- 仅显示用
- 操作列 - 功能按钮列

### 默认排序配置
```javascript
:default-sort="{prop: 'u_time', order: 'descending'}"
```
页面默认按修改时间(u_time)降序排序。

## 错误报告格式要求

### 1. 执行摘要
- 测试执行时间：[开始时间] - [结束时间]
- 总测试用例数：[数量]
- 通过用例数：[数量]
- 失败用例数：[数量]
- 发现错误总数：[数量]

### 2. 错误详情报告
每个发现的错误包含：
```
错误ID：ERROR_SORT_001
错误类型：JavaScript运行时错误
发生阶段：Phase 2 - 文本字段排序测试
触发操作：点击warehouse_name列头进行升序排序
错误信息：[具体错误信息]
堆栈跟踪：[完整堆栈信息]
重现步骤：
1. [具体步骤]
2. [具体步骤]
影响级别：高/中/低
建议修复：[修复建议]
相关截图：[截图文件名]
```

### 3. 性能分析报告
```
排序性能统计：
- 平均响应时间：[时间]ms
- 最慢排序操作：[字段名] - [时间]ms
- 最快排序操作：[字段名] - [时间]ms
- 超时操作数量：[数量]

网络请求分析：
- 总请求数：[数量]
- 成功请求：[数量] ([百分比]%)
- 失败请求：[数量] ([百分比]%)
- 平均响应时间：[时间]ms
```

### 4. 兼容性报告
- 浏览器版本：[版本信息]
- 页面加载时间：[时间]
- JavaScript兼容性：正常/异常
- CSS渲染：正常/异常

### 5. 用户体验评估
- 排序操作直观性：优秀/良好/需改进
- 排序指示器清晰度：优秀/良好/需改进
- 错误提示友好性：优秀/良好/需改进
- 整体流畅性：优秀/良好/需改进

## 测试输出要求

1. **实时测试日志**：每个操作的即时反馈
2. **错误截图**：所有错误状态的可视化记录
3. **性能数据**：详细的计时和资源使用信息
4. **最终综合报告**：包含所有上述格式的完整文档

测试完成后，请提供：
- 测试执行成功/失败的总体状态
- 发现的所有错误的优先级排序
- 针对发现问题的修复建议
- 下一步测试建议或风险评估

## 使用说明

将此提示词直接提供给Playwright MCP工具执行，工具将自动完成所有测试阶段并生成详细的错误检测报告。