# Tasks: AI Workflow å·¥ä½œæµåŠŸèƒ½è¿ç§»

**Input**: Design documents from `/specs/001-ai-workflow-migration/`
**Prerequisites**: plan.md, spec.md, research.md, data-model.md, contracts/workflow-api.md

**Tests**: æ ¹æ® spec.mdï¼Œæœ¬åŠŸèƒ½æœªæ˜Žç¡®è¦æ±‚æµ‹è¯•ä»»åŠ¡ï¼Œå› æ­¤æœ¬ä»»åŠ¡åˆ—è¡¨ä¸åŒ…å«æµ‹è¯•ä»»åŠ¡ã€‚å¦‚éœ€æµ‹è¯•ï¼Œè¯·ä½¿ç”¨ Playwright è¿›è¡Œ E2E æµ‹è¯•ã€‚

**Organization**: ä»»åŠ¡æŒ‰ç”¨æˆ·æ•…äº‹ï¼ˆUser Storyï¼‰ç»„ç»‡ï¼Œä½¿æ¯ä¸ªæ•…äº‹å¯ä»¥ç‹¬ç«‹å®žæ–½å’ŒéªŒè¯ã€‚

## Format: `[ID] [P?] [Story] Description`
- **[P]**: å¯ä»¥å¹¶è¡Œè¿è¡Œï¼ˆä¸åŒæ–‡ä»¶ï¼Œæ— ä¾èµ–ï¼‰
- **[Story]**: ä»»åŠ¡æ‰€å±žçš„ç”¨æˆ·æ•…äº‹ï¼ˆä¾‹å¦‚ US1, US2, US3ï¼‰
- æè¿°ä¸­åŒ…å«å‡†ç¡®çš„æ–‡ä»¶è·¯å¾„

## Path Conventions
- å‰ç«¯ Vue.js é¡¹ç›®ï¼š`src/components/70_ai/`
- æ‰€æœ‰å·¥ä½œæµç›¸å…³ä»£ç å¿…é¡»ä¿å­˜åœ¨ `70_ai` æ¨¡å—ä¸‹

---

## Phase 1: Setup (é¡¹ç›®åˆå§‹åŒ–)

**Purpose**: é¡¹ç›®åŸºç¡€ç»“æž„å’Œä¾èµ–å®‰è£…

- [ ] T001 åˆ›å»ºå·¥ä½œæµç›®å½•ç»“æž„ `src/components/70_ai/components/workflow/`, `src/components/70_ai/api/`, `src/components/70_ai/constants/`, `src/components/70_ai/store/modules/`, `src/components/70_ai/utils/`, `src/components/70_ai/styles/`
- [ ] T002 å®‰è£… AntV X6 ä¾èµ–ï¼š`npm install @antv/x6 --save`
- [ ] T003 [P] åˆ›å»ºå·¥ä½œæµæ ·å¼æ–‡ä»¶ `src/components/70_ai/styles/workflow.scss`ï¼ˆåŸºç¡€æ ·å¼å®šä¹‰ï¼‰

---

## Phase 2: Foundational (åŸºç¡€è®¾æ–½ - æ‰€æœ‰ç”¨æˆ·æ•…äº‹çš„å‰ç½®æ¡ä»¶)

**Purpose**: æ ¸å¿ƒåŸºç¡€è®¾æ–½ï¼Œå¿…é¡»åœ¨ä»»ä½•ç”¨æˆ·æ•…äº‹å®žæ–½å‰å®Œæˆ

**âš ï¸ CRITICAL**: åœ¨æ­¤é˜¶æ®µå®Œæˆä¹‹å‰ï¼Œä¸èƒ½å¼€å§‹ä»»ä½•ç”¨æˆ·æ•…äº‹çš„å·¥ä½œ

### å¸¸é‡å’Œç±»åž‹å®šä¹‰

- [ ] T004 [P] åˆ›å»ºå·¥ä½œæµå¸¸é‡æ–‡ä»¶ `src/components/70_ai/constants/workflowConstants.js`ï¼ˆå®šä¹‰çŠ¶æ€ç ï¼šWORKFLOW_STATUS, NODE_STATUS, DATA_TYPESï¼‰
- [ ] T005 [P] åˆ›å»ºèŠ‚ç‚¹ç±»åž‹å®šä¹‰æ–‡ä»¶ `src/components/70_ai/constants/nodeTypeDefinitions.js`ï¼ˆå®šä¹‰ NODE_TYPES åŒ…å«æ‰€æœ‰ 16 ç§èŠ‚ç‚¹ç±»åž‹ï¼šStart, End, LlmAnswer, Classifier, Branch, Template, DocumentExtract, KeywordExtract, FaqExtract, KnowledgeRetrieval, HttpRequest, HumanFeedback, EmailSend, GoogleSearch, ImageGenDalle3, ImageGenTongyiï¼‰

### Vuex çŠ¶æ€ç®¡ç†

- [ ] T006 [P] åˆ›å»ºå·¥ä½œæµ Vuex æ¨¡å— `src/components/70_ai/store/modules/workflow.js`ï¼ˆstate: currentWorkflow, nodes, edges, editorState; mutations: SET_CURRENT_WORKFLOW, ADD_NODE, UPDATE_NODE, DELETE_NODE, ADD_EDGE, DELETE_EDGE, SET_DIRTY, SELECT_NODE; actions: loadWorkflow, saveWorkflow, createWorkflow, deleteWorkflow, duplicateWorkflow, loadWorkflowList, loadComponentLibraryï¼‰
- [ ] T007 [P] åˆ›å»ºå·¥ä½œæµè¿è¡Œæ—¶ Vuex æ¨¡å— `src/components/70_ai/store/modules/workflowRuntime.js`ï¼ˆstate: currentRuntime, runtimeNodes, sseConnected, sseError, runtimeHistory, selectedHistory; mutations: SET_CURRENT_RUNTIME, UPDATE_RUNTIME_STATUS, SET_NODE_STATUS, UPDATE_NODE_INPUT, UPDATE_NODE_OUTPUT, APPEND_NODE_CHUNK, SET_SSE_CONNECTED, SET_SSE_ERROR, SET_RUNTIME_HISTORY, SET_SELECTED_HISTORY; actions: runWorkflow, stopWorkflow, provideFeedback, loadRuntimeHistory, loadHistoryDetail, deleteRuntimeHistoryï¼‰
- [ ] T008 åœ¨ `src/store/index.js` ä¸­æ³¨å†Œå·¥ä½œæµ Vuex æ¨¡å—ï¼ˆå¯¼å…¥ workflow å’Œ workflowRuntime æ¨¡å—å¹¶æ³¨å†Œåˆ°å…¨å±€ Vuex storeï¼‰

### API æœåŠ¡

- [ ] T009 [P] åˆ›å»ºå·¥ä½œæµç®¡ç† API `src/components/70_ai/api/workflowApi.js`ï¼ˆå‡½æ•°ï¼šgetWorkflowList, getWorkflowDetail, createWorkflow, updateWorkflow, deleteWorkflow, duplicateWorkflow, saveWorkflowNodes, validateWorkflow, getComponentLibraryï¼‰
- [ ] T010 [P] åˆ›å»ºå·¥ä½œæµè¿è¡Œ API `src/components/70_ai/api/workflowRuntimeApi.js`ï¼ˆå‡½æ•°ï¼šrunWorkflowï¼ˆä½¿ç”¨ SSEï¼‰, stopWorkflow, provideFeedback, getRuntimeHistory, getRuntimeDetail, deleteRuntimeHistory, clearRuntimeHistoryï¼‰

### å·¥å…·å‡½æ•°

- [ ] T011 [P] åˆ›å»ºå·¥ä½œæµéªŒè¯å·¥å…· `src/components/70_ai/utils/workflowValidator.js`ï¼ˆå‡½æ•°ï¼šdetectCycleï¼ˆæ‹“æ‰‘æŽ’åºæ£€æµ‹å¾ªçŽ¯ï¼‰, detectIsolatedNodesï¼ˆå­¤ç«‹èŠ‚ç‚¹æ£€æµ‹ï¼‰, validateRequiredNodesï¼ˆå¿…éœ€èŠ‚ç‚¹æ£€æŸ¥ï¼‰, validateNodeConfigsï¼ˆèŠ‚ç‚¹é…ç½®å®Œæ•´æ€§éªŒè¯ï¼‰, validateWorkflowï¼ˆç»¼åˆéªŒè¯ï¼‰, validateWorkflowNameï¼‰
- [ ] T012 [P] åˆ›å»ºèŠ‚ç‚¹æ•°æ®æ˜ å°„å·¥å…· `src/components/70_ai/utils/nodeDataMapper.js`ï¼ˆå‡½æ•°ï¼šgenerateNodeOutputï¼ˆç”ŸæˆèŠ‚ç‚¹è¾“å‡º NodeIODataï¼‰, resolveNodeInputï¼ˆè§£æžèŠ‚ç‚¹è¾“å…¥ï¼Œå¤„ç†å¼•ç”¨ï¼‰, handleFileInputï¼ˆå¤„ç†æ–‡ä»¶ç±»åž‹ï¼‰, mapNodeIODataï¼ˆæ•°æ®æ ¼å¼è½¬æ¢ï¼‰ï¼‰
- [ ] T013 [P] åˆ›å»º X6 å›¾å½¢è¾…åŠ©å·¥å…· `src/components/70_ai/utils/x6GraphHelper.js`ï¼ˆå‡½æ•°ï¼šinitGraphï¼ˆåˆå§‹åŒ– X6 Graph å®žä¾‹ï¼‰, registerCustomNodesï¼ˆæ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹ç±»åž‹ï¼‰, highlightNodeï¼ˆèŠ‚ç‚¹çŠ¶æ€é«˜äº®ï¼‰, addNodeToGraphï¼ˆæ·»åŠ èŠ‚ç‚¹åˆ°ç”»å¸ƒï¼‰, addEdgeToGraphï¼ˆæ·»åŠ è¿žçº¿åˆ°ç”»å¸ƒï¼‰, removeNodeFromGraph, removeEdgeFromGraphï¼‰
- [ ] T014 [P] åˆ›å»ºå·¥ä½œæµ SSE å¤„ç†å·¥å…· `src/components/70_ai/utils/workflowSseHandler.js`ï¼ˆå‡½æ•°ï¼šhandleSseEventï¼ˆSSE äº‹ä»¶åˆ†å‘ï¼‰, parseNodeUuidFromEventï¼ˆä»Žäº‹ä»¶åæå– nodeUuidï¼‰, initWorkflowRuntime, highlightNodeStatus, updateNodeInput, updateNodeOutput, appendNodeChunk, promptUserFeedback, completeWorkflowExecution, handleExecutionErrorï¼‰ï¼ˆå¤ç”¨ `src/components/70_ai/utils/sseUtils.js` çš„ createKbQaStreamï¼‰

**Checkpoint**: åŸºç¡€è®¾æ–½å°±ç»ª - çŽ°åœ¨å¯ä»¥å¼€å§‹å¹¶è¡Œå®žæ–½ç”¨æˆ·æ•…äº‹

---

## Phase 3: User Story 1 - åˆ›å»ºå’Œè®¾è®¡å·¥ä½œæµ (Priority: P1) ðŸŽ¯ MVP

**Goal**: ç”¨æˆ·èƒ½å¤Ÿé€šè¿‡å¯è§†åŒ–ç•Œé¢åˆ›å»ºå·¥ä½œæµï¼Œæ‹–æ‹½èŠ‚ç‚¹å¹¶è¿žçº¿ï¼Œä¿å­˜å·¥ä½œæµå®šä¹‰

**Independent Test**:
1. ç‚¹å‡» chat ai å¼¹çª—ä¸­çš„ workflow å›¾æ ‡ï¼Œå·¥ä½œæµå¼¹çª—æ‰“å¼€
2. ç‚¹å‡»"æ–°å»ºå·¥ä½œæµ"æŒ‰é’®ï¼Œè¾“å…¥åç§°å’Œæè¿°ï¼ŒæˆåŠŸåˆ›å»ºå·¥ä½œæµ
3. ä»ŽèŠ‚ç‚¹åº“æ‹–æ‹½"å¼€å§‹èŠ‚ç‚¹"å’Œ"ç»“æŸèŠ‚ç‚¹"åˆ°ç”»å¸ƒ
4. è¿žæŽ¥ä¸¤ä¸ªèŠ‚ç‚¹ï¼ŒæˆåŠŸåˆ›å»ºè¿žçº¿
5. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®ï¼Œå·¥ä½œæµä¿å­˜æˆåŠŸ
6. å…³é—­å¼¹çª—åŽé‡æ–°æ‰“å¼€ï¼Œå·¥ä½œæµåˆ—è¡¨æ˜¾ç¤ºåˆšåˆ›å»ºçš„å·¥ä½œæµ
7. ç‚¹å‡»å·¥ä½œæµï¼Œç”»å¸ƒæ­£ç¡®æ˜¾ç¤ºèŠ‚ç‚¹å’Œè¿žçº¿

### å®žæ–½ User Story 1

#### ä¸»å¼¹çª—å’Œå…¥å£

- [ ] T015 [US1] åœ¨ chat ai å¼¹çª—ç»„ä»¶ä¸­æ·»åŠ  workflow å›¾æ ‡æŒ‰é’®å…¥å£ï¼ˆæ‰¾åˆ° chat ai å¼¹çª—ç»„ä»¶ï¼Œåœ¨"æ‰“å¼€æˆ‘çš„çŸ¥è¯†åº“"å›¾æ ‡æ—è¾¹æ·»åŠ  workflow å›¾æ ‡ `el-icon-s-operation`ï¼Œç‚¹å‡»åŽæ‰“å¼€å·¥ä½œæµå¼¹çª—ï¼‰
- [ ] T016 [US1] åˆ›å»ºå·¥ä½œæµä¸»å¼¹çª—ç»„ä»¶ `src/components/70_ai/components/workflow/WorkflowDialog.vue`ï¼ˆel-dialog é…ç½®ï¼š`:modal="true"`, `:close-on-click-modal="false"`, `:close-on-press-escape="false"`, `:show-close="false"`, `:append-to-body="true"`, `:modal-append-to-body="true"`, `width="900px"`, `destroy-on-close`, `top="5vh"`, ä½¿ç”¨ `v-el-drag-dialog` æŒ‡ä»¤æ”¯æŒæ‹–æ‹½ï¼Œå†…å« el-tabs åˆ‡æ¢"æˆ‘çš„å·¥ä½œæµ"å’Œ"è®¾è®¡å™¨"ï¼‰

#### å·¥ä½œæµåˆ—è¡¨

- [ ] T017 [P] [US1] åˆ›å»ºå·¥ä½œæµåˆ—è¡¨ç»„ä»¶ `src/components/70_ai/components/workflow/WorkflowList.vue`ï¼ˆel-tabs: "æˆ‘çš„å·¥ä½œæµ" / "å…¬å¼€å¸‚åœº"ï¼Œel-table æ˜¾ç¤ºå·¥ä½œæµåˆ—è¡¨ï¼ˆåç§°ã€æè¿°ã€åˆ›å»ºæ—¶é—´ã€èŠ‚ç‚¹æ•°ã€è¿è¡Œæ¬¡æ•°ï¼‰ï¼Œel-pagination åˆ†é¡µï¼Œæœç´¢æ¡†ï¼ˆel-inputï¼‰ï¼Œæ“ä½œæŒ‰é’®ï¼šæ–°å»ºã€ç¼–è¾‘ã€å¤åˆ¶ã€åˆ é™¤ã€è¿è¡Œï¼Œè°ƒç”¨ `$store.dispatch('workflow/loadWorkflowList')`ï¼‰
- [ ] T018 [US1] åœ¨ WorkflowList ä¸­å®žçŽ°æ–°å»ºå·¥ä½œæµå¯¹è¯æ¡†ï¼ˆel-dialogï¼Œel-form åŒ…å«ï¼šå·¥ä½œæµåç§°ï¼ˆå¿…å¡«ï¼‰ã€æè¿°ï¼ˆé€‰å¡«ï¼‰ã€æ˜¯å¦å…¬å¼€ï¼ˆel-switchï¼‰ï¼Œè°ƒç”¨ `$store.dispatch('workflow/createWorkflow')`ï¼ŒæˆåŠŸåŽåˆ·æ–°åˆ—è¡¨å¹¶è·³è½¬åˆ°è®¾è®¡å™¨ï¼‰

#### X6 ç”»å¸ƒå’ŒèŠ‚ç‚¹ç®¡ç†

- [ ] T019 [US1] åˆ›å»ºå·¥ä½œæµç”»å¸ƒç»„ä»¶ `src/components/70_ai/components/workflow/WorkflowCanvas.vue`ï¼ˆåˆå§‹åŒ– X6 Graph å®žä¾‹ï¼Œé…ç½® gridï¼ˆç½‘æ ¼ï¼‰ã€panningï¼ˆå¹³ç§»ï¼‰ã€mousewheelï¼ˆç¼©æ”¾ï¼‰ã€connectingï¼ˆè¿žçº¿é…ç½®ï¼‰ï¼Œæä¾›ç”»å¸ƒå®¹å™¨ divï¼Œç›‘å¬èŠ‚ç‚¹ç‚¹å‡»äº‹ä»¶æ‰“å¼€é…ç½®é¢æ¿ï¼Œç›‘å¬è¿žçº¿äº‹ä»¶ä¿å­˜è¿žçº¿ï¼Œå·¥å…·æ ï¼šä¿å­˜ã€éªŒè¯ã€ç¼©æ”¾ã€æ¸…ç©ºç”»å¸ƒï¼Œè°ƒç”¨ `$store.dispatch('workflow/loadWorkflow')` åŠ è½½å·¥ä½œæµæ•°æ®ï¼‰
- [ ] T020 [P] [US1] åˆ›å»ºèŠ‚ç‚¹åº“é¢æ¿ç»„ä»¶ `src/components/70_ai/components/workflow/NodeLibrary.vue`ï¼ˆel-collapse åˆ†ç±»æ˜¾ç¤ºèŠ‚ç‚¹ï¼ˆinput/output/logic/ai/integrationï¼‰ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ˜¾ç¤ºå›¾æ ‡å’Œæ ‡é¢˜ï¼Œæ”¯æŒæ‹–æ‹½åˆ°ç”»å¸ƒï¼Œä½¿ç”¨ X6 çš„ Dnd æ’ä»¶å®žçŽ°æ‹–æ‹½ï¼Œè°ƒç”¨ `$store.state.workflow.componentLibrary`ï¼‰
- [ ] T021 [P] [US1] åˆ›å»ºå¼€å§‹èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/StartNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç»¿è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-video-playï¼Œè¾“å‡ºç«¯å£ 1 ä¸ªï¼Œé»˜è®¤é…ç½®ï¼šæ— éœ€é…ç½®é¡¹ï¼‰
- [ ] T022 [P] [US1] åˆ›å»ºç»“æŸèŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/EndNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œçº¢è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-video-pauseï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼Œé»˜è®¤é…ç½®ï¼šæ— éœ€é…ç½®é¡¹ï¼‰

#### å·¥ä½œæµä¿å­˜å’ŒéªŒè¯

- [ ] T023 [US1] åœ¨ WorkflowCanvas ä¸­å®žçŽ°å·¥ä½œæµä¿å­˜åŠŸèƒ½ï¼ˆæ”¶é›†ç”»å¸ƒä¸Šæ‰€æœ‰èŠ‚ç‚¹ï¼ˆä½ç½®ã€é…ç½®ï¼‰å’Œè¿žçº¿ï¼Œè°ƒç”¨ `$store.dispatch('workflow/saveWorkflow')`ï¼Œå¢žé‡ä¿å­˜ï¼ˆä»…æäº¤å˜æ›´çš„èŠ‚ç‚¹å’Œè¿žçº¿ï¼‰ï¼Œä¿å­˜å‰è°ƒç”¨ `validateWorkflow` éªŒè¯ï¼Œæ˜¾ç¤ºä¿å­˜æˆåŠŸ/å¤±è´¥æ¶ˆæ¯ï¼‰
- [ ] T024 [US1] åœ¨ WorkflowCanvas ä¸­å®žçŽ°å·¥ä½œæµéªŒè¯åŠŸèƒ½ï¼ˆç‚¹å‡»"éªŒè¯"æŒ‰é’®ï¼Œè°ƒç”¨ `workflowValidator.validateWorkflow()`ï¼Œæ£€æŸ¥ï¼šè‡³å°‘åŒ…å«å¼€å§‹å’Œç»“æŸèŠ‚ç‚¹ã€æ— å¾ªçŽ¯å¼•ç”¨ã€æ— å­¤ç«‹èŠ‚ç‚¹ã€èŠ‚ç‚¹é…ç½®å®Œæ•´æ€§ï¼ŒéªŒè¯é€šè¿‡æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ï¼ŒéªŒè¯å¤±è´¥æ˜¾ç¤ºé”™è¯¯åˆ—è¡¨ el-message-boxï¼‰

#### ç”»å¸ƒäº¤äº’åŠŸèƒ½

- [ ] T025 [US1] å®žçŽ°èŠ‚ç‚¹æ‹–æ‹½å’Œå®šä½åŠŸèƒ½ï¼ˆä»Ž NodeLibrary æ‹–æ‹½èŠ‚ç‚¹åˆ°ç”»å¸ƒï¼ŒX6 Dnd æ’ä»¶å¤„ç†æ‹–æ‹½ï¼Œè®°å½•èŠ‚ç‚¹ä½ç½®ï¼ˆposition_x, position_yï¼‰ï¼Œæ‹–æ‹½ç»“æŸåŽæ›´æ–° Vuex storeï¼Œæ ‡è®° isDirty = trueï¼‰
- [ ] T026 [US1] å®žçŽ°èŠ‚ç‚¹è¿žçº¿åŠŸèƒ½ï¼ˆX6 connecting é…ç½®ï¼Œå…è®¸ä»Žè¾“å‡ºç«¯å£æ‹–æ‹½åˆ°è¾“å…¥ç«¯å£ï¼Œåˆ›å»º edge å¯¹è±¡ï¼Œä¿å­˜åˆ° Vuex storeï¼ˆADD_EDGEï¼‰ï¼Œä¸å…è®¸ï¼šç©ºè¿žçº¿ã€å¤šé‡è¿žçº¿ã€è‡ªçŽ¯è¿žçº¿ï¼Œè¿žçº¿æ ·å¼ï¼šåœ†è§’ã€ç®­å¤´ï¼‰
- [ ] T027 [US1] å®žçŽ°èŠ‚ç‚¹å’Œè¿žçº¿åˆ é™¤åŠŸèƒ½ï¼ˆé€‰ä¸­èŠ‚ç‚¹æŒ‰ Delete é”®åˆ é™¤ï¼Œé€‰ä¸­è¿žçº¿æŒ‰ Delete é”®åˆ é™¤ï¼Œè°ƒç”¨ `$store.commit('workflow/DELETE_NODE')` å’Œ `$store.commit('workflow/DELETE_EDGE')`ï¼Œçº§è”åˆ é™¤ç›¸å…³è¿žçº¿ï¼Œæ ‡è®° isDirty = trueï¼‰

**Checkpoint**: æ­¤æ—¶ç”¨æˆ·æ•…äº‹ 1 åº”è¯¥å®Œå…¨å¯ç”¨ä¸”å¯ç‹¬ç«‹æµ‹è¯•ã€‚ç”¨æˆ·å¯ä»¥åˆ›å»ºå·¥ä½œæµã€æ‹–æ‹½èŠ‚ç‚¹ã€è¿žçº¿ã€ä¿å­˜ã€éªŒè¯ã€‚

---

## Phase 4: User Story 2 - é…ç½®å·¥ä½œæµèŠ‚ç‚¹ (Priority: P1)

**Goal**: ç”¨æˆ·èƒ½å¤Ÿè¯¦ç»†é…ç½®æ¯ä¸ªèŠ‚ç‚¹çš„å‚æ•°å’Œè¡Œä¸ºï¼Œå®žçŽ°ç²¾ç¡®çš„ä¸šåŠ¡é€»è¾‘

**Independent Test**:
1. åœ¨ç”»å¸ƒä¸Šç‚¹å‡»ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå¦‚ LLM å›žç­”èŠ‚ç‚¹ï¼‰
2. å³ä¾§å±žæ€§é¢æ¿æ‰“å¼€ï¼Œæ˜¾ç¤ºè¯¥èŠ‚ç‚¹çš„æ‰€æœ‰å¯é…ç½®å‚æ•°
3. é€‰æ‹© AI æ¨¡åž‹ï¼ˆå¦‚ GPT-4ï¼‰ï¼Œè¾“å…¥æç¤ºè¯æ¨¡æ¿ï¼Œè°ƒæ•´æ¸©åº¦å‚æ•°
4. ç‚¹å‡»"ä¿å­˜"æŒ‰é’®ï¼Œé…ç½®ä¿å­˜æˆåŠŸ
5. å…³é—­é¢æ¿åŽé‡æ–°ç‚¹å‡»è¯¥èŠ‚ç‚¹ï¼Œé…ç½®æ­£ç¡®ä¿ç•™
6. ç‚¹å‡»"æµ‹è¯•è¿è¡Œ"æŒ‰é’®ï¼Œå·¥ä½œæµä½¿ç”¨å½“å‰é…ç½®æ‰§è¡Œå¹¶è¿”å›žç»“æžœ

### å®žæ–½ User Story 2

#### èŠ‚ç‚¹é…ç½®é¢æ¿åŸºç¡€

- [ ] T028 [US2] åˆ›å»ºèŠ‚ç‚¹é…ç½®é¢æ¿ç»„ä»¶ `src/components/70_ai/components/workflow/panels/NodeConfigPanel.vue`ï¼ˆel-drawer å³ä¾§æŠ½å±‰ï¼Œæ˜¾ç¤ºå½“å‰é€‰ä¸­èŠ‚ç‚¹çš„é…ç½®ï¼Œel-form åŒ…å«ï¼šèŠ‚ç‚¹æ ‡é¢˜ï¼ˆel-inputï¼‰ã€èŠ‚ç‚¹ç‰¹å®šé…ç½®ï¼ˆæ ¹æ®èŠ‚ç‚¹ç±»åž‹åŠ¨æ€æ¸²æŸ“ï¼‰ï¼Œä¿å­˜æŒ‰é’®è°ƒç”¨ `$store.commit('workflow/UPDATE_NODE')`ï¼Œå–æ¶ˆæŒ‰é’®å…³é—­é¢æ¿ï¼Œè¡¨å•éªŒè¯è§„åˆ™ï¼‰
- [ ] T029 [US2] åœ¨ WorkflowCanvas ä¸­é›†æˆ NodeConfigPanelï¼ˆç›‘å¬èŠ‚ç‚¹ç‚¹å‡»äº‹ä»¶ `graph.on('node:click')`ï¼Œè®¾ç½® `selectedNode` å¹¶æ‰“å¼€ NodeConfigPanelï¼ŒèŠ‚ç‚¹é…ç½®ä¿å­˜åŽæ›´æ–° X6 èŠ‚ç‚¹æ•°æ®å’Œæ ‡ç­¾ï¼Œè°ƒç”¨ `node.setData()` å’Œ `node.setAttrByPath('label/text')`ï¼‰

#### LLM èŠ‚ç‚¹é…ç½®

- [ ] T030 [P] [US2] åˆ›å»º LLM å›žç­”èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/LlmNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œè“è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-chat-dot-roundï¼Œè¾“å…¥ç«¯å£ 2 ä¸ªï¼ˆuser_question, contextï¼‰ã€è¾“å‡ºç«¯å£ 1 ä¸ªï¼ˆanswerï¼‰ï¼Œé»˜è®¤é…ç½®ï¼šmodelName='gpt-3.5-turbo', promptTemplate='', temperature=0.7, maxTokens=2000ï¼‰
- [ ] T031 [US2] åœ¨ NodeConfigPanel ä¸­æ·»åŠ  LLM èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-select é€‰æ‹© AI æ¨¡åž‹ï¼ˆä»ŽçŽ°æœ‰æ¨¡åž‹åˆ—è¡¨åŠ è½½ï¼‰ï¼Œel-input type="textarea" è¾“å…¥æç¤ºè¯æ¨¡æ¿ï¼ˆæ”¯æŒå˜é‡å¼•ç”¨ `{{variable}}`ï¼‰ï¼Œel-slider è°ƒæ•´æ¸©åº¦ï¼ˆ0-2ï¼‰ï¼Œel-input-number è®¾ç½®æœ€å¤§ token æ•°ï¼ˆ100-4000ï¼‰ï¼Œæç¤ºè¯æ¨¡æ¿éªŒè¯ï¼šå¿…å¡«ã€å˜é‡å¼•ç”¨è¯­æ³•æ£€æŸ¥ï¼‰

#### çŸ¥è¯†æ£€ç´¢èŠ‚ç‚¹é…ç½®

- [ ] T032 [P] [US2] åˆ›å»ºçŸ¥è¯†æ£€ç´¢èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/KnowledgeNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç´«è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-folder-openedï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼ˆqueryï¼‰ã€è¾“å‡ºç«¯å£ 1 ä¸ªï¼ˆknowledgeï¼‰ï¼Œé»˜è®¤é…ç½®ï¼škbUuid='', retrieveMaxResults=5, retrieveMinScore=0.5, strictMode=falseï¼‰
- [ ] T033 [US2] åœ¨ NodeConfigPanel ä¸­æ·»åŠ çŸ¥è¯†æ£€ç´¢èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-select é€‰æ‹©çŸ¥è¯†åº“ï¼ˆè°ƒç”¨çŸ¥è¯†åº“ API åŠ è½½åˆ—è¡¨ï¼‰ï¼Œel-slider è®¾ç½®ç›¸ä¼¼åº¦é˜ˆå€¼ï¼ˆ0-1ï¼‰ï¼Œel-input-number è®¾ç½®æœ€å¤§ç»“æžœæ•°ï¼ˆ1-20ï¼‰ï¼Œel-switch è®¾ç½®ä¸¥æ ¼æ¨¡å¼ï¼ŒçŸ¥è¯†åº“å¿…é€‰éªŒè¯ï¼‰

#### åˆ†ç±»å™¨å’Œåˆ†æ”¯èŠ‚ç‚¹é…ç½®

- [ ] T034 [P] [US2] åˆ›å»ºåˆ†ç±»å™¨èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/ClassifierNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œæ©™è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-s-operationï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼ˆinputï¼‰ã€è¾“å‡ºç«¯å£åŠ¨æ€ï¼ˆæ ¹æ®åˆ†ç±»ç±»åˆ«æ•°é‡ï¼‰ï¼Œé»˜è®¤é…ç½®ï¼šmodelName='', categories=[]ï¼ˆæ¯ä¸ª category åŒ…å« name, description, targetNodeUuidï¼‰ï¼‰
- [ ] T035 [US2] åœ¨ NodeConfigPanel ä¸­æ·»åŠ åˆ†ç±»å™¨èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-select é€‰æ‹© AI æ¨¡åž‹ï¼ŒåŠ¨æ€æ·»åŠ åˆ†ç±»ç±»åˆ«ï¼ˆel-button "æ·»åŠ åˆ†ç±»"ï¼‰ï¼Œæ¯ä¸ªåˆ†ç±»åŒ…å«ï¼šåç§°ï¼ˆel-inputï¼‰ã€æè¿°ï¼ˆel-inputï¼‰ã€ç›®æ ‡èŠ‚ç‚¹ï¼ˆel-select ä»Žç”»å¸ƒèŠ‚ç‚¹åˆ—è¡¨é€‰æ‹©ï¼‰ï¼Œåˆ†ç±»åˆ—è¡¨å¯æ‹–æ‹½æŽ’åºï¼Œè‡³å°‘ 2 ä¸ªåˆ†ç±»éªŒè¯ï¼‰
- [ ] T036 [P] [US2] åˆ›å»ºåˆ†æ”¯èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/BranchNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œé»„è‰²è±å½¢ï¼Œå›¾æ ‡ el-icon-shareï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªã€è¾“å‡ºç«¯å£åŠ¨æ€ï¼Œé»˜è®¤é…ç½®ï¼šconditions=[]ï¼ˆæ¯ä¸ª condition åŒ…å« expression, targetNodeUuidï¼‰ï¼ŒdefaultBranch=''ï¼‰
- [ ] T037 [US2] åœ¨ NodeConfigPanel ä¸­æ·»åŠ åˆ†æ”¯èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆåŠ¨æ€æ·»åŠ æ¡ä»¶åˆ†æ”¯ï¼Œæ¯ä¸ªåˆ†æ”¯åŒ…å«ï¼šæ¡ä»¶è¡¨è¾¾å¼ï¼ˆel-inputï¼Œæ”¯æŒ ==, !=, >, <, contains ç­‰æ“ä½œç¬¦ï¼‰ã€ç›®æ ‡èŠ‚ç‚¹ï¼ˆel-selectï¼‰ï¼Œè®¾ç½®é»˜è®¤åˆ†æ”¯ï¼ˆel-selectï¼‰ï¼Œè¡¨è¾¾å¼è¯­æ³•éªŒè¯ï¼‰

#### æ¨¡æ¿èŠ‚ç‚¹é…ç½®

- [ ] T038 [P] [US2] åˆ›å»ºæ¨¡æ¿èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/TemplateNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç°è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-documentï¼Œè¾“å…¥ç«¯å£åŠ¨æ€ï¼ˆæ ¹æ®å˜é‡æ•°é‡ï¼‰ã€è¾“å‡ºç«¯å£ 1 ä¸ªï¼ˆoutputï¼‰ï¼Œé»˜è®¤é…ç½®ï¼štemplate=''ï¼ˆæ”¯æŒ `{{variable}}` å˜é‡ï¼‰ï¼‰
- [ ] T039 [US2] åœ¨ NodeConfigPanel ä¸­æ·»åŠ æ¨¡æ¿èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-input type="textarea" è¾“å…¥æ¨¡æ¿å†…å®¹ï¼Œè‡ªåŠ¨è¯†åˆ«æ¨¡æ¿ä¸­çš„å˜é‡ `{{variable}}`ï¼Œæ˜¾ç¤ºå˜é‡åˆ—è¡¨ï¼Œæ¨¡æ¿å˜é‡è¯­æ³•éªŒè¯ï¼‰

#### èŠ‚ç‚¹é…ç½®ä¿å­˜å’ŒéªŒè¯

- [ ] T040 [US2] å®žçŽ°èŠ‚ç‚¹é…ç½®çš„è¡¨å•éªŒè¯ï¼ˆä½¿ç”¨ Element UI çš„ el-form éªŒè¯è§„åˆ™ï¼Œå¿…å¡«å­—æ®µéªŒè¯ï¼ˆæ¨¡åž‹åç§°ã€çŸ¥è¯†åº“ç­‰ï¼‰ï¼Œæ•°å€¼èŒƒå›´éªŒè¯ï¼ˆæ¸©åº¦ 0-2ã€é˜ˆå€¼ 0-1ï¼‰ï¼Œè‡ªå®šä¹‰éªŒè¯ï¼ˆæç¤ºè¯æ¨¡æ¿å˜é‡è¯­æ³•ã€æ¡ä»¶è¡¨è¾¾å¼è¯­æ³•ï¼‰ï¼ŒéªŒè¯å¤±è´¥é˜»æ­¢ä¿å­˜å¹¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼‰
- [ ] T041 [US2] å®žçŽ°èŠ‚ç‚¹é…ç½®çš„ä¿å­˜å’Œæ›´æ–°ï¼ˆç‚¹å‡»"ä¿å­˜"æŒ‰é’®ï¼Œè°ƒç”¨ `$refs.form.validate()`ï¼ŒéªŒè¯é€šè¿‡åŽæ›´æ–°èŠ‚ç‚¹ node_configï¼Œè°ƒç”¨ `$store.commit('workflow/UPDATE_NODE')`ï¼Œæ›´æ–° X6 èŠ‚ç‚¹æ•°æ® `node.setData()`ï¼Œå…³é—­é…ç½®é¢æ¿ï¼Œæ˜¾ç¤ºä¿å­˜æˆåŠŸæ¶ˆæ¯ï¼‰

**Checkpoint**: æ­¤æ—¶ç”¨æˆ·æ•…äº‹ 1 å’Œ 2 éƒ½åº”è¯¥å¯ç”¨ä¸”å¯ç‹¬ç«‹æµ‹è¯•ã€‚ç”¨æˆ·å¯ä»¥åˆ›å»ºå·¥ä½œæµã€é…ç½®èŠ‚ç‚¹å‚æ•°ã€ä¿å­˜é…ç½®ã€‚

---

## Phase 5: User Story 3 - è¿è¡Œå’Œè°ƒè¯•å·¥ä½œæµ (Priority: P1)

**Goal**: ç”¨æˆ·èƒ½å¤Ÿæ‰§è¡Œå·¥ä½œæµå¹¶å®žæ—¶æŸ¥çœ‹è¿è¡ŒçŠ¶æ€ï¼ŒéªŒè¯å·¥ä½œæµæ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œ

**Independent Test**:
1. æ‰“å¼€ä¸€ä¸ªå·²ä¿å­˜çš„å·¥ä½œæµï¼ˆè‡³å°‘åŒ…å«å¼€å§‹ â†’ LLM å›žç­” â†’ ç»“æŸï¼‰
2. ç‚¹å‡»"è¿è¡Œ"æŒ‰é’®ï¼Œè¾“å…¥å¿…è¦çš„å‚æ•°ï¼ˆå¦‚ç”¨æˆ·é—®é¢˜ï¼‰
3. å·¥ä½œæµå¼€å§‹æ‰§è¡Œï¼Œç”»å¸ƒä¸ŠèŠ‚ç‚¹ä¾æ¬¡é«˜äº®æ˜¾ç¤ºæ‰§è¡ŒçŠ¶æ€
4. LLM èŠ‚ç‚¹æ‰§è¡Œæ—¶ï¼Œå®žæ—¶æ˜¾ç¤ºæµå¼è¾“å‡ºæ–‡æœ¬
5. å·¥ä½œæµæ‰§è¡Œå®Œæˆï¼Œæ˜¾ç¤ºæœ€ç»ˆè¾“å‡ºç»“æžœ
6. å¯ä»¥æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å…¥å’Œè¾“å‡ºæ•°æ®

### å®žæ–½ User Story 3

#### å·¥ä½œæµè¿è¡Œç•Œé¢

- [ ] T042 [US3] åˆ›å»ºå·¥ä½œæµè¿è¡Œç»„ä»¶ `src/components/70_ai/components/workflow/WorkflowRunner.vue`ï¼ˆå±•ç¤ºå½“å‰å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€ï¼Œæ˜¾ç¤ºè¿è¡Œæ—¶ç”»å¸ƒï¼ˆå¤ç”¨ WorkflowCanvas åªè¯»æ¨¡å¼ï¼‰ï¼Œæ˜¾ç¤ºå®žæ—¶è¾“å‡ºæ–‡æœ¬ï¼ˆel-card å±•ç¤ºæµå¼è¾“å‡ºï¼‰ï¼Œæ˜¾ç¤ºæ‰§è¡Œè¿›åº¦ï¼ˆel-progressï¼‰ï¼Œæ“ä½œæŒ‰é’®ï¼šåœæ­¢è¿è¡Œã€æä¾›åé¦ˆï¼ˆäººå·¥åé¦ˆèŠ‚ç‚¹ï¼‰ï¼Œè°ƒç”¨ `$store.dispatch('workflowRuntime/runWorkflow')`ï¼‰
- [ ] T043 [US3] åˆ›å»ºå·¥ä½œæµè¿è¡Œè¾“å…¥å¯¹è¯æ¡† `src/components/70_ai/components/workflow/dialogs/RunConfigDialog.vue`ï¼ˆel-dialogï¼Œel-form æ ¹æ®å·¥ä½œæµå¼€å§‹èŠ‚ç‚¹çš„è¾“å‡ºé…ç½®åŠ¨æ€ç”Ÿæˆè¾“å…¥è¡¨å•ï¼Œæ”¯æŒæ–‡æœ¬è¾“å…¥ï¼ˆel-inputï¼‰ã€æ•°å­—è¾“å…¥ï¼ˆel-input-numberï¼‰ã€æ–‡ä»¶ä¸Šä¼ ï¼ˆel-uploadï¼‰ï¼Œè¡¨å•éªŒè¯å¿…å¡«å­—æ®µï¼Œç¡®è®¤æŒ‰é’®è°ƒç”¨ runWorkflowï¼Œå–æ¶ˆæŒ‰é’®å…³é—­å¯¹è¯æ¡†ï¼‰

#### SSE å®žæ—¶æŽ¨é€å¤„ç†

- [ ] T044 [US3] åœ¨ workflowRuntimeApi.js ä¸­å®žçŽ° runWorkflow SSE æŽ¥å£ï¼ˆè°ƒç”¨ `src/components/70_ai/utils/sseUtils.js` çš„ createKbQaStreamï¼ŒURL: `/scm/ai/workflow/${wfUuid}/run`ï¼Œè¯·æ±‚ä½“ï¼š`{ inputs: userInputs }`ï¼Œå¤„ç† 8 ç§ SSE äº‹ä»¶ï¼š[START], [NODE_RUN_{nodeUuid}], [NODE_INPUT_{nodeUuid}], [NODE_CHUNK_{nodeUuid}], [NODE_OUTPUT_{nodeUuid}], [NODE_WAIT_FEEDBACK_BY_{nodeUuid}], [DONE], [ERROR]ï¼ŒSSE è¶…æ—¶æ—¶é—´ 150ç§’ï¼‰
- [ ] T045 [US3] åœ¨ workflowSseHandler.js ä¸­å®žçŽ° SSE äº‹ä»¶åˆ†å‘å¤„ç†å™¨ï¼ˆhandleSseEvent å‡½æ•°ï¼Œæ ¹æ®äº‹ä»¶ååˆ†å‘åˆ°ä¸åŒå¤„ç†å‡½æ•°ï¼šinitWorkflowRuntime ([START])ã€highlightNodeStatus ([NODE_RUN_])ã€updateNodeInput ([NODE_INPUT_])ã€appendNodeChunk ([NODE_CHUNK_])ã€updateNodeOutput ([NODE_OUTPUT_])ã€promptUserFeedback ([NODE_WAIT_FEEDBACK_BY_])ã€completeWorkflowExecution ([DONE])ã€handleExecutionError ([ERROR])ï¼Œæ¯ä¸ªå¤„ç†å‡½æ•°æ›´æ–° Vuex store çŠ¶æ€ï¼‰

#### èŠ‚ç‚¹çŠ¶æ€å¯è§†åŒ–

- [ ] T046 [US3] åœ¨ x6GraphHelper.js ä¸­å®žçŽ°èŠ‚ç‚¹çŠ¶æ€é«˜äº®åŠŸèƒ½ï¼ˆhighlightNode å‡½æ•°ï¼Œæ ¹æ®çŠ¶æ€æ›´æ–°èŠ‚ç‚¹æ ·å¼ï¼šrunning=è“è‰²è¾¹æ¡†ï¼ˆ#1890ffï¼‰ã€success=ç»¿è‰²è¾¹æ¡†ï¼ˆ#52c41aï¼‰ã€fail=çº¢è‰²è¾¹æ¡†ï¼ˆ#ff4d4fï¼‰ã€waiting=æ©™è‰²è¾¹æ¡†ï¼ˆ#faad14ï¼‰ï¼Œè°ƒç”¨ `node.attr('body/stroke')` å’Œ `node.attr('body/strokeWidth', 3)`ï¼Œrunning çŠ¶æ€æ·»åŠ è™šçº¿åŠ¨ç”» `stroke-dasharray: '5,5'`ï¼‰
- [ ] T047 [US3] åœ¨ WorkflowRunner ä¸­é›†æˆèŠ‚ç‚¹çŠ¶æ€æ›´æ–°ï¼ˆç›‘å¬ Vuex store çš„ runtimeNodes çŠ¶æ€å˜åŒ–ï¼Œè°ƒç”¨ highlightNode æ›´æ–°ç”»å¸ƒèŠ‚ç‚¹æ ·å¼ï¼Œæ˜¾ç¤ºèŠ‚ç‚¹æ‰§è¡Œæ—¶é—´ï¼Œæ˜¾ç¤ºèŠ‚ç‚¹è¾“å…¥è¾“å‡ºæ•°æ®ï¼ˆel-collapse æŠ˜å é¢æ¿ï¼‰ï¼‰

#### æµå¼è¾“å‡ºå’Œå®žæ—¶åé¦ˆ

- [ ] T048 [US3] å®žçŽ° LLM èŠ‚ç‚¹æµå¼è¾“å‡ºæ˜¾ç¤ºï¼ˆåœ¨ WorkflowRunner ä¸­ç›‘å¬ SSE çš„ [NODE_CHUNK_{nodeUuid}] äº‹ä»¶ï¼Œç´¯ç§¯æ–‡æœ¬å—åˆ° outputTextï¼Œå®žæ—¶æ›´æ–°æ˜¾ç¤ºåŒºåŸŸï¼ˆel-cardï¼Œè‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨ï¼‰ï¼Œæ”¯æŒ Markdown æ¸²æŸ“ï¼ˆå¦‚éœ€è¦ï¼‰ï¼‰
- [ ] T049 [US3] å®žçŽ°äººå·¥åé¦ˆèŠ‚ç‚¹äº¤äº’ï¼ˆç›‘å¬ SSE çš„ [NODE_WAIT_FEEDBACK_BY_{nodeUuid}] äº‹ä»¶ï¼Œæš‚åœå·¥ä½œæµæ‰§è¡Œï¼Œå¼¹å‡ºåé¦ˆè¾“å…¥å¯¹è¯æ¡†ï¼ˆel-dialogï¼Œel-input type="textarea"ï¼‰ï¼Œç”¨æˆ·è¾“å…¥åé¦ˆå†…å®¹ï¼Œç‚¹å‡»"æäº¤"è°ƒç”¨ `$store.dispatch('workflowRuntime/provideFeedback')`ï¼Œå·¥ä½œæµç»§ç»­æ‰§è¡Œï¼‰

#### å·¥ä½œæµæ‰§è¡ŒæŽ§åˆ¶

- [ ] T050 [US3] å®žçŽ°åœæ­¢å·¥ä½œæµåŠŸèƒ½ï¼ˆåœ¨ WorkflowRunner ä¸­æ·»åŠ "åœæ­¢"æŒ‰é’®ï¼Œè°ƒç”¨ `$store.dispatch('workflowRuntime/stopWorkflow')`ï¼Œè°ƒç”¨åŽç«¯ API `/scm/ai/workflow/runtime/${runtimeUuid}/stop`ï¼Œåœæ­¢ SSE è¿žæŽ¥ï¼Œæ¸…ç†è¿è¡Œæ—¶çŠ¶æ€ï¼Œæ˜¾ç¤º"å·¥ä½œæµå·²åœæ­¢"æ¶ˆæ¯ï¼‰
- [ ] T051 [US3] å®žçŽ°å·¥ä½œæµæ‰§è¡Œå®Œæˆå¤„ç†ï¼ˆç›‘å¬ SSE çš„ [DONE] äº‹ä»¶ï¼Œæ›´æ–°å·¥ä½œæµçŠ¶æ€ä¸º SUCCESSï¼Œæ˜¾ç¤ºæ‰§è¡Œå®Œæˆæ¶ˆæ¯ï¼ˆel-message.successï¼‰ï¼Œæ˜¾ç¤ºæœ€ç»ˆè¾“å‡ºç»“æžœï¼Œåœæ­¢æ‰€æœ‰åŠ¨ç”»æ•ˆæžœï¼Œå¯ä»¥é‡æ–°è¿è¡Œï¼‰
- [ ] T052 [US3] å®žçŽ°å·¥ä½œæµæ‰§è¡Œé”™è¯¯å¤„ç†ï¼ˆç›‘å¬ SSE çš„ [ERROR] äº‹ä»¶ï¼Œæ›´æ–°å·¥ä½œæµçŠ¶æ€ä¸º FAILï¼Œæ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯ï¼ˆel-message.errorï¼‰ï¼Œè®°å½•é”™è¯¯è¯¦æƒ…åˆ° statusRemarkï¼Œé«˜äº®å¤±è´¥çš„èŠ‚ç‚¹ï¼ˆçº¢è‰²è¾¹æ¡†ï¼‰ï¼Œåœæ­¢æ‰§è¡Œï¼‰

**Checkpoint**: æ­¤æ—¶ç”¨æˆ·æ•…äº‹ 1ã€2ã€3 éƒ½åº”è¯¥å¯ç”¨ä¸”å¯ç‹¬ç«‹æµ‹è¯•ã€‚ç”¨æˆ·å¯ä»¥åˆ›å»ºã€é…ç½®ã€è¿è¡Œå·¥ä½œæµï¼ŒæŸ¥çœ‹å®žæ—¶æ‰§è¡ŒçŠ¶æ€ã€‚è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„ MVPã€‚

---

## Phase 6: User Story 4 - ç®¡ç†å·¥ä½œæµç‰ˆæœ¬ (Priority: P2)

**Goal**: ç”¨æˆ·èƒ½å¤ŸæŸ¥çœ‹ã€å¤åˆ¶å’Œåˆ é™¤å·¥ä½œæµï¼Œæœ‰æ•ˆç®¡ç†å¤šä¸ªå·¥ä½œæµå®žä¾‹

**Independent Test**:
1. æ‰“å¼€å·¥ä½œæµåˆ—è¡¨ï¼Œæ˜¾ç¤ºæ‰€æœ‰å·²åˆ›å»ºçš„å·¥ä½œæµ
2. é€‰ä¸­ä¸€ä¸ªå·¥ä½œæµï¼Œç‚¹å‡»"å¤åˆ¶"æŒ‰é’®ï¼ŒæˆåŠŸåˆ›å»ºå‰¯æœ¬ï¼ˆåç§°ä¸º"[åŽŸåç§°]-å‰¯æœ¬"ï¼‰
3. é€‰ä¸­ä¸€ä¸ªå·¥ä½œæµï¼Œç‚¹å‡»"åˆ é™¤"æŒ‰é’®ï¼Œå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼Œç¡®è®¤åŽåˆ é™¤æˆåŠŸ
4. åˆ‡æ¢åˆ°"å…¬å¼€å¸‚åœº"æ ‡ç­¾ï¼Œæ˜¾ç¤ºå…¬å¼€çš„å·¥ä½œæµåˆ—è¡¨
5. é€‰ä¸­ä¸€ä¸ªå…¬å¼€å·¥ä½œæµï¼Œå¯ä»¥å¤åˆ¶åˆ°"æˆ‘çš„å·¥ä½œæµ"

### å®žæ–½ User Story 4

#### å·¥ä½œæµåˆ—è¡¨å¢žå¼º

- [ ] T053 [US4] åœ¨ WorkflowList ä¸­å®žçŽ°å·¥ä½œæµæœç´¢åŠŸèƒ½ï¼ˆel-input æœç´¢æ¡†ï¼ˆå¸¦ el-icon-searchï¼‰ï¼Œè¾“å…¥å…³é”®è¯åŽè°ƒç”¨ `$store.dispatch('workflow/loadWorkflowList', { keyword })`ï¼Œæœç´¢åç§°å’Œæè¿°å­—æ®µï¼Œå®žæ—¶æœç´¢ï¼ˆä½¿ç”¨ debounce å»¶è¿Ÿ 500msï¼‰ï¼‰
- [ ] T054 [US4] åœ¨ WorkflowList ä¸­å®žçŽ°å·¥ä½œæµæŽ’åºåŠŸèƒ½ï¼ˆel-select é€‰æ‹©æŽ’åºæ–¹å¼ï¼šåˆ›å»ºæ—¶é—´ã€ä¿®æ”¹æ—¶é—´ã€åç§°ã€è¿è¡Œæ¬¡æ•°ï¼Œè°ƒç”¨ API æ—¶ä¼ é€’ sortBy å’Œ sortOrder å‚æ•°ï¼Œé»˜è®¤æŒ‰ä¿®æ”¹æ—¶é—´å€’åºï¼‰

#### å·¥ä½œæµå¤åˆ¶åŠŸèƒ½

- [ ] T055 [US4] åœ¨ WorkflowList ä¸­å®žçŽ°å·¥ä½œæµå¤åˆ¶åŠŸèƒ½ï¼ˆè¡¨æ ¼æ“ä½œåˆ—æ·»åŠ "å¤åˆ¶"æŒ‰é’®ï¼ˆel-button icon="el-icon-document-copy"ï¼‰ï¼Œç‚¹å‡»åŽè°ƒç”¨ `$store.dispatch('workflow/duplicateWorkflow', wfUuid)`ï¼Œè°ƒç”¨åŽç«¯ API `/scm/ai/workflow/${wfUuid}/duplicate`ï¼ŒæˆåŠŸåŽåˆ·æ–°åˆ—è¡¨å¹¶æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ï¼Œå‰¯æœ¬åç§°è‡ªåŠ¨æ·»åŠ "-å‰¯æœ¬"åŽç¼€ï¼‰
- [ ] T056 [US4] å®žçŽ°å…¬å¼€å·¥ä½œæµå¤åˆ¶åˆ°æˆ‘çš„å·¥ä½œæµï¼ˆåœ¨"å…¬å¼€å¸‚åœº"æ ‡ç­¾é¡µï¼Œè¡¨æ ¼æ“ä½œåˆ—æ·»åŠ "å¤åˆ¶åˆ°æˆ‘çš„å·¥ä½œæµ"æŒ‰é’®ï¼Œç‚¹å‡»åŽè°ƒç”¨ duplicateWorkflow APIï¼ŒæˆåŠŸåŽåˆ‡æ¢åˆ°"æˆ‘çš„å·¥ä½œæµ"æ ‡ç­¾å¹¶åˆ·æ–°åˆ—è¡¨ï¼‰

#### å·¥ä½œæµåˆ é™¤åŠŸèƒ½

- [ ] T057 [US4] åœ¨ WorkflowList ä¸­å®žçŽ°å·¥ä½œæµåˆ é™¤åŠŸèƒ½ï¼ˆè¡¨æ ¼æ“ä½œåˆ—æ·»åŠ "åˆ é™¤"æŒ‰é’®ï¼ˆel-button type="danger" icon="el-icon-delete"ï¼‰ï¼Œç‚¹å‡»åŽå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼ˆel-message-box.confirmï¼‰ï¼Œç¡®è®¤åŽè°ƒç”¨ `$store.dispatch('workflow/deleteWorkflow', wfUuid)`ï¼Œè°ƒç”¨åŽç«¯ API `/scm/ai/workflow/${wfUuid}` DELETEï¼ŒæˆåŠŸåŽåˆ·æ–°åˆ—è¡¨å¹¶æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ï¼Œå¦‚æžœå·¥ä½œæµæ­£åœ¨è¿è¡Œåˆ™é˜»æ­¢åˆ é™¤å¹¶æç¤ºï¼‰
- [ ] T058 [US4] å®žçŽ°å·¥ä½œæµæ‰¹é‡åˆ é™¤åŠŸèƒ½ï¼ˆè¡¨æ ¼æ·»åŠ å¤šé€‰æ¡†ï¼ˆel-table-column type="selection"ï¼‰ï¼Œå·¥å…·æ æ·»åŠ "æ‰¹é‡åˆ é™¤"æŒ‰é’®ï¼Œé€‰ä¸­å¤šä¸ªå·¥ä½œæµåŽç‚¹å‡»æ‰¹é‡åˆ é™¤ï¼Œå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†æ˜¾ç¤ºåˆ é™¤æ•°é‡ï¼Œç¡®è®¤åŽä¾æ¬¡è°ƒç”¨ deleteWorkflow APIï¼Œæ˜¾ç¤ºåˆ é™¤è¿›åº¦å’Œç»“æžœï¼‰

#### å…¬å¼€å·¥ä½œæµå¸‚åœº

- [ ] T059 [US4] åœ¨ WorkflowList ä¸­å®žçŽ°å…¬å¼€å¸‚åœºæ ‡ç­¾é¡µï¼ˆel-tabs æ·»åŠ "å…¬å¼€å¸‚åœº"æ ‡ç­¾ï¼Œè°ƒç”¨ `$store.dispatch('workflow/loadWorkflowList', { type: 'public' })`ï¼Œæ˜¾ç¤ºæ‰€æœ‰ is_public=true çš„å·¥ä½œæµï¼Œè¡¨æ ¼æ˜¾ç¤ºï¼šåç§°ã€æè¿°ã€åˆ›å»ºè€…ã€åˆ›å»ºæ—¶é—´ã€è¿è¡Œæ¬¡æ•°ï¼Œæ“ä½œæŒ‰é’®ï¼šæŸ¥çœ‹è¯¦æƒ…ã€å¤åˆ¶åˆ°æˆ‘çš„å·¥ä½œæµï¼‰
- [ ] T060 [US4] å®žçŽ°å·¥ä½œæµå…¬å¼€/ç§æœ‰åˆ‡æ¢åŠŸèƒ½ï¼ˆåœ¨å·¥ä½œæµç¼–è¾‘å¯¹è¯æ¡†ä¸­æ·»åŠ "æ˜¯å¦å…¬å¼€"å¼€å…³ï¼ˆel-switchï¼‰ï¼Œä¿å­˜æ—¶è°ƒç”¨ updateWorkflow API æ›´æ–° is_public å­—æ®µï¼Œå…¬å¼€åŽå·¥ä½œæµå‡ºçŽ°åœ¨å…¬å¼€å¸‚åœºï¼Œå–æ¶ˆå…¬å¼€åŽä»Žå¸‚åœºç§»é™¤ï¼‰

**Checkpoint**: æ­¤æ—¶ç”¨æˆ·æ•…äº‹ 1-4 éƒ½åº”è¯¥å¯ç”¨ã€‚ç”¨æˆ·å¯ä»¥å®Œæ•´ç®¡ç†å·¥ä½œæµï¼ˆåˆ›å»ºã€é…ç½®ã€è¿è¡Œã€å¤åˆ¶ã€åˆ é™¤ã€å…¬å¼€ï¼‰ã€‚

---

## Phase 7: User Story 5 - ä½¿ç”¨é«˜çº§èŠ‚ç‚¹ç±»åž‹ (Priority: P2)

**Goal**: ç”¨æˆ·èƒ½å¤Ÿä½¿ç”¨ä¸“ä¸šèŠ‚ç‚¹ï¼ˆæ–‡æ¡£æå–ã€å…³é”®è¯æå–ã€HTTPè¯·æ±‚ç­‰ï¼‰ï¼Œæž„å»ºå¤æ‚çš„ä¸šåŠ¡è‡ªåŠ¨åŒ–æµç¨‹

**Independent Test**:
1. åˆ›å»ºæ–°å·¥ä½œæµï¼Œæ·»åŠ "æ–‡æ¡£æå–"èŠ‚ç‚¹
2. é…ç½®èŠ‚ç‚¹ï¼Œä¸Šä¼  PDF æ–‡ä»¶
3. è¿žæŽ¥åˆ°å¤§æ¨¡åž‹èŠ‚ç‚¹ï¼Œè¿è¡Œå·¥ä½œæµ
4. æˆåŠŸæå–æ–‡æ¡£æ–‡æœ¬å†…å®¹å¹¶ä¼ é€’ç»™å¤§æ¨¡åž‹èŠ‚ç‚¹
5. å¤§æ¨¡åž‹èŠ‚ç‚¹åŸºäºŽæ–‡æ¡£å†…å®¹ç”Ÿæˆå›žç­”

### å®žæ–½ User Story 5

#### æ–‡æ¡£å¤„ç†èŠ‚ç‚¹

- [ ] T061 [P] [US5] åˆ›å»ºæ–‡æ¡£æå–èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/DocumentExtractNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œé’è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-documentï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼ˆfilesï¼‰ã€è¾“å‡ºç«¯å£ 1 ä¸ªï¼ˆtextï¼‰ï¼Œé»˜è®¤é…ç½®ï¼šextractMode='full'ï¼ˆå…¨æ–‡æå–/æŒ‰é¡µæå–ï¼‰ï¼‰
- [ ] T062 [US5] åœ¨ NodeConfigPanel ä¸­æ·»åŠ æ–‡æ¡£æå–èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-upload ä¸Šä¼ æ–‡ä»¶ï¼ˆæ”¯æŒ PDFã€Wordã€TXTï¼‰ï¼Œæ˜¾ç¤ºå·²ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨ï¼Œel-radio é€‰æ‹©æå–æ¨¡å¼ï¼šå…¨æ–‡æå–/æŒ‰é¡µæå–ï¼Œæ–‡ä»¶ç±»åž‹éªŒè¯ï¼ˆä»…å…è®¸æ–‡æ¡£ç±»åž‹ï¼‰ï¼‰
- [ ] T063 [P] [US5] åˆ›å»ºå…³é”®è¯æå–èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/KeywordExtractNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç»¿è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-price-tagï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼ˆtextï¼‰ã€è¾“å‡ºç«¯å£ 1 ä¸ªï¼ˆkeywordsï¼‰ï¼Œé»˜è®¤é…ç½®ï¼šmodelName='', maxKeywords=10ï¼‰
- [ ] T064 [US5] åœ¨ NodeConfigPanel ä¸­æ·»åŠ å…³é”®è¯æå–èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-select é€‰æ‹© AI æ¨¡åž‹ï¼Œel-input-number è®¾ç½®æœ€å¤§å…³é”®è¯æ•°é‡ï¼ˆ1-50ï¼‰ï¼Œel-checkbox æ˜¯å¦åŒ…å«å…³é”®è¯æƒé‡ï¼‰
- [ ] T065 [P] [US5] åˆ›å»º FAQ æå–èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/FaqExtractNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œæ©™è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-questionï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼ˆtextï¼‰ã€è¾“å‡ºç«¯å£ 1 ä¸ªï¼ˆfaqsï¼‰ï¼Œé»˜è®¤é…ç½®ï¼šmodelName='', maxFaqs=20ï¼‰
- [ ] T066 [US5] åœ¨ NodeConfigPanel ä¸­æ·»åŠ  FAQ æå–èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-select é€‰æ‹© AI æ¨¡åž‹ï¼Œel-input-number è®¾ç½®æœ€å¤§ FAQ æ•°é‡ï¼ˆ1-100ï¼‰ï¼Œel-input type="textarea" è¾“å…¥ FAQ æå–æŒ‡å¼•ï¼ˆå¯é€‰ï¼‰ï¼‰

#### é›†æˆèŠ‚ç‚¹

- [ ] T067 [P] [US5] åˆ›å»º HTTP è¯·æ±‚èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/HttpNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç°è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-linkï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼ˆrequest_bodyï¼‰ã€è¾“å‡ºç«¯å£ 1 ä¸ªï¼ˆresponseï¼‰ï¼Œé»˜è®¤é…ç½®ï¼šurl='', method='GET', headers={}, timeout=30, retryCount=3ï¼‰
- [ ] T068 [US5] åœ¨ NodeConfigPanel ä¸­æ·»åŠ  HTTP è¯·æ±‚èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-input è¾“å…¥ URLï¼ˆå¿…å¡«ï¼ŒéªŒè¯ HTTP/HTTPSï¼‰ï¼Œel-select é€‰æ‹©è¯·æ±‚æ–¹æ³•ï¼ˆGET/POST/PUT/DELETEï¼‰ï¼Œel-input è¾“å…¥è¯·æ±‚å¤´ï¼ˆJSON æ ¼å¼ï¼Œå¯é€‰ï¼‰ï¼Œel-input type="textarea" è¾“å…¥è¯·æ±‚ä½“ï¼ˆæ”¯æŒå˜é‡å¼•ç”¨ï¼Œå¯é€‰ï¼‰ï¼Œel-slider è®¾ç½®è¶…æ—¶æ—¶é—´ï¼ˆ1-600 ç§’ï¼‰ï¼Œel-input-number è®¾ç½®é‡è¯•æ¬¡æ•°ï¼ˆ0-10 æ¬¡ï¼‰ï¼ŒURL æ ¼å¼éªŒè¯ï¼ŒJSON æ ¼å¼éªŒè¯ï¼‰
- [ ] T069 [P] [US5] åˆ›å»ºé‚®ä»¶å‘é€èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/EmailNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œçº¢è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-messageï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼ˆcontentï¼‰ã€è¾“å‡ºç«¯å£ 0 ä¸ªï¼Œé»˜è®¤é…ç½®ï¼šrecipients=[], subject='', smtpServer='', smtpPort=587, username='', password=''ï¼‰
- [ ] T070 [US5] åœ¨ NodeConfigPanel ä¸­æ·»åŠ é‚®ä»¶å‘é€èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-select mode="tags" è¾“å…¥æ”¶ä»¶äººï¼ˆæ”¯æŒå¤šä¸ªï¼Œå¿…å¡«ï¼‰ï¼Œel-input è¾“å…¥é‚®ä»¶ä¸»é¢˜ï¼ˆå¿…å¡«ï¼‰ï¼Œel-input type="textarea" è¾“å…¥é‚®ä»¶æ­£æ–‡ï¼ˆæ”¯æŒ HTML å’Œå˜é‡å¼•ç”¨ï¼‰ï¼Œel-input è¾“å…¥ SMTP æœåŠ¡å™¨åœ°å€ï¼Œel-input-number è¾“å…¥ SMTP ç«¯å£ï¼Œel-input è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼Œé‚®ç®±æ ¼å¼éªŒè¯ï¼‰

#### æœç´¢å’Œå›¾åƒç”ŸæˆèŠ‚ç‚¹

- [ ] T071 [P] [US5] åˆ›å»º Google æœç´¢èŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/GoogleSearchNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œå½©è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-searchï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼ˆqueryï¼‰ã€è¾“å‡ºç«¯å£ 1 ä¸ªï¼ˆresultsï¼‰ï¼Œé»˜è®¤é…ç½®ï¼šmaxResults=10, language='zh-CN'ï¼‰
- [ ] T072 [US5] åœ¨ NodeConfigPanel ä¸­æ·»åŠ  Google æœç´¢èŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-input-number è®¾ç½®æœ€å¤§ç»“æžœæ•°ï¼ˆ1-50ï¼‰ï¼Œel-select é€‰æ‹©æœç´¢è¯­è¨€ï¼Œel-input è¾“å…¥ API å¯†é’¥ï¼ˆå¿…å¡«ï¼‰ï¼Œå¯†é’¥éªŒè¯ï¼‰
- [ ] T073 [P] [US5] åˆ›å»º Dalle3 å›¾åƒç”ŸæˆèŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/ImageGenDalle3Node.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç´«è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-pictureï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼ˆpromptï¼‰ã€è¾“å‡ºç«¯å£ 1 ä¸ªï¼ˆimage_urlï¼‰ï¼Œé»˜è®¤é…ç½®ï¼šsize='1024x1024', quality='standard', style='vivid'ï¼‰
- [ ] T074 [US5] åœ¨ NodeConfigPanel ä¸­æ·»åŠ  Dalle3 å›¾åƒç”ŸæˆèŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-select é€‰æ‹©å›¾åƒå°ºå¯¸ï¼ˆ1024x1024/1792x1024/1024x1792ï¼‰ï¼Œel-select é€‰æ‹©è´¨é‡ï¼ˆstandard/hdï¼‰ï¼Œel-select é€‰æ‹©é£Žæ ¼ï¼ˆvivid/naturalï¼‰ï¼‰
- [ ] T075 [P] [US5] åˆ›å»ºé€šä¹‰ä¸‡ç›¸å›¾åƒç”ŸæˆèŠ‚ç‚¹ç»„ä»¶ `src/components/70_ai/components/workflow/nodes/ImageGenTongyiNode.vue`ï¼ˆX6 è‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œç´«è‰²åœ†è§’çŸ©å½¢ï¼Œå›¾æ ‡ el-icon-picture-outlineï¼Œè¾“å…¥ç«¯å£ 1 ä¸ªï¼ˆpromptï¼‰ã€è¾“å‡ºç«¯å£ 1 ä¸ªï¼ˆimage_urlï¼‰ï¼Œé»˜è®¤é…ç½®ï¼šsize='1024*1024', n=1ï¼‰
- [ ] T076 [US5] åœ¨ NodeConfigPanel ä¸­æ·»åŠ é€šä¹‰ä¸‡ç›¸å›¾åƒç”ŸæˆèŠ‚ç‚¹é…ç½®è¡¨å•ï¼ˆel-select é€‰æ‹©å›¾åƒå°ºå¯¸ï¼ˆ1024*1024/720*1280/1280*720ï¼‰ï¼Œel-input-number è®¾ç½®ç”Ÿæˆæ•°é‡ï¼ˆ1-4ï¼‰ï¼‰

#### é«˜çº§èŠ‚ç‚¹æ³¨å†Œå’Œæ˜¾ç¤º

- [ ] T077 [US5] åœ¨ NodeLibrary ä¸­æ·»åŠ é«˜çº§èŠ‚ç‚¹åˆ†ç±»ï¼ˆel-collapse æ·»åŠ "é«˜çº§èŠ‚ç‚¹"åˆ†ç±»ï¼ˆintegration é›†æˆç±»ï¼‰ï¼Œæ˜¾ç¤º HTTP è¯·æ±‚ã€é‚®ä»¶å‘é€ã€Google æœç´¢èŠ‚ç‚¹ï¼Œæ·»åŠ "AI å¤„ç†"åˆ†ç±»ï¼ˆai ç±»ï¼‰ï¼Œæ˜¾ç¤ºæ–‡æ¡£æå–ã€å…³é”®è¯æå–ã€FAQ æå–ã€å›¾åƒç”ŸæˆèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ˜¾ç¤ºå›¾æ ‡ã€æ ‡é¢˜ã€ç®€çŸ­æè¿°ï¼‰
- [ ] T078 [US5] åœ¨ x6GraphHelper.js ä¸­æ³¨å†Œæ‰€æœ‰é«˜çº§èŠ‚ç‚¹ç±»åž‹ï¼ˆè°ƒç”¨ `Shape.register()` ä¸ºæ¯ä¸ªé«˜çº§èŠ‚ç‚¹ç±»åž‹æ³¨å†Œè‡ªå®šä¹‰èŠ‚ç‚¹ï¼Œè®¾ç½®èŠ‚ç‚¹æ ·å¼ï¼ˆé¢œè‰²ã€å›¾æ ‡ã€ç«¯å£é…ç½®ï¼‰ï¼Œä½¿ç”¨ Vue ç»„ä»¶æ¸²æŸ“ï¼ˆå¦‚æžœéœ€è¦ï¼‰ï¼‰

**Checkpoint**: æ­¤æ—¶ç”¨æˆ·æ•…äº‹ 1-5 éƒ½åº”è¯¥å¯ç”¨ã€‚ç”¨æˆ·å¯ä»¥ä½¿ç”¨æ‰€æœ‰ 16 ç§èŠ‚ç‚¹ç±»åž‹æž„å»ºå¤æ‚çš„å·¥ä½œæµã€‚

---

## Phase 8: User Story 6 - æŸ¥çœ‹è¿è¡ŒåŽ†å²å’Œè°ƒè¯• (Priority: P3)

**Goal**: ç”¨æˆ·èƒ½å¤ŸæŸ¥çœ‹è¯¦ç»†çš„è¿è¡ŒåŽ†å²å’ŒèŠ‚ç‚¹æ‰§è¡Œæ—¥å¿—ï¼ŒæŽ’æŸ¥é—®é¢˜å’Œä¼˜åŒ–å·¥ä½œæµ

**Independent Test**:
1. æ‰“å¼€å·¥ä½œæµåˆ—è¡¨ï¼Œç‚¹å‡»æŸä¸ªå·¥ä½œæµçš„"åŽ†å²è®°å½•"æŒ‰é’®
2. æ˜¾ç¤ºè¯¥å·¥ä½œæµçš„æ‰€æœ‰è¿è¡Œè®°å½•åˆ—è¡¨ï¼ˆæ—¶é—´ã€çŠ¶æ€ã€æ‰§è¡Œæ—¶é•¿ï¼‰
3. ç‚¹å‡»æŸæ¡è¿è¡Œè®°å½•ï¼Œæ˜¾ç¤ºè¯¦ç»†æ‰§è¡Œè½¨è¿¹
4. æŸ¥çœ‹æ¯ä¸ªèŠ‚ç‚¹çš„è¾“å…¥æ•°æ®å’Œè¾“å‡ºç»“æžœ
5. å¦‚æžœæŸä¸ªèŠ‚ç‚¹æ‰§è¡Œå¤±è´¥ï¼ŒæŸ¥çœ‹è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå¤±è´¥åŽŸå› 
6. å¯ä»¥åˆ é™¤å•æ¡æˆ–æ¸…ç©ºæ‰€æœ‰åŽ†å²è®°å½•

### å®žæ–½ User Story 6

#### è¿è¡ŒåŽ†å²åˆ—è¡¨

- [ ] T079 [US6] åˆ›å»ºå·¥ä½œæµåŽ†å²è®°å½•ç»„ä»¶ `src/components/70_ai/components/workflow/WorkflowHistory.vue`ï¼ˆel-table æ˜¾ç¤ºè¿è¡ŒåŽ†å²åˆ—è¡¨ï¼ˆè¿è¡Œæ—¶é—´ã€æ‰§è¡Œæ—¶é•¿ã€çŠ¶æ€ã€æ“ä½œï¼‰ï¼Œel-pagination åˆ†é¡µï¼Œel-select ç­›é€‰çŠ¶æ€ï¼ˆå…¨éƒ¨/æˆåŠŸ/å¤±è´¥/æ‰§è¡Œä¸­ï¼‰ï¼Œel-date-picker ç­›é€‰æ—¥æœŸèŒƒå›´ï¼Œè¡¨æ ¼åˆ—ï¼šruntime_uuidï¼ˆéšè—ï¼‰ã€start_timeã€end_timeã€durationï¼ˆæ‰§è¡Œæ—¶é•¿ï¼Œè‡ªåŠ¨è®¡ç®—ï¼‰ã€statusï¼ˆçŠ¶æ€æ ‡ç­¾ï¼Œä½¿ç”¨ el-tagï¼‰ã€æ“ä½œæŒ‰é’®ï¼šæŸ¥çœ‹è¯¦æƒ…ã€åˆ é™¤ï¼Œå·¥å…·æ æŒ‰é’®ï¼šæ¸…ç©ºåŽ†å²è®°å½•ï¼Œè°ƒç”¨ `$store.dispatch('workflowRuntime/loadRuntimeHistory')`ï¼‰
- [ ] T080 [US6] åœ¨ WorkflowList ä¸­æ·»åŠ "åŽ†å²è®°å½•"å…¥å£ï¼ˆè¡¨æ ¼æ“ä½œåˆ—æ·»åŠ "åŽ†å²è®°å½•"æŒ‰é’®ï¼ˆel-button icon="el-icon-time"ï¼‰ï¼Œç‚¹å‡»åŽæ‰“å¼€ WorkflowHistory ç»„ä»¶ï¼ˆel-drawer å³ä¾§æŠ½å±‰ï¼‰ï¼Œä¼ é€’ wfUuid å‚æ•°ï¼ŒåŠ è½½è¯¥å·¥ä½œæµçš„åŽ†å²è®°å½•ï¼‰

#### è¿è¡Œè¯¦æƒ…æŸ¥çœ‹

- [ ] T081 [US6] åˆ›å»ºè¿è¡Œè¯¦æƒ…å¯¹è¯æ¡†ç»„ä»¶ `src/components/70_ai/components/workflow/dialogs/RuntimeDetailDialog.vue`ï¼ˆel-dialog æ˜¾ç¤ºå•æ¬¡è¿è¡Œçš„è¯¦ç»†ä¿¡æ¯ï¼Œé¡¶éƒ¨ï¼šè¿è¡Œæ—¶é—´ã€æ‰§è¡Œæ—¶é•¿ã€çŠ¶æ€ï¼ˆel-tagï¼‰ï¼Œä¸­é—´ï¼šå·¥ä½œæµç”»å¸ƒï¼ˆåªè¯»æ¨¡å¼ï¼ŒèŠ‚ç‚¹æ˜¾ç¤ºæ‰§è¡ŒçŠ¶æ€ï¼‰ï¼Œel-collapse æŠ˜å é¢æ¿æ˜¾ç¤ºæ¯ä¸ªèŠ‚ç‚¹çš„è¯¦ç»†ä¿¡æ¯ï¼ˆèŠ‚ç‚¹åç§°ã€æ‰§è¡Œæ—¶é—´ã€è¾“å…¥æ•°æ®ã€è¾“å‡ºæ•°æ®ã€çŠ¶æ€ã€é”™è¯¯ä¿¡æ¯ï¼‰ï¼Œåº•éƒ¨ï¼šç”¨æˆ·è¾“å…¥å‚æ•°ã€æœ€ç»ˆè¾“å‡ºç»“æžœï¼Œè°ƒç”¨ `$store.dispatch('workflowRuntime/loadHistoryDetail')`ï¼‰
- [ ] T082 [US6] åœ¨ WorkflowHistory ä¸­é›†æˆè¿è¡Œè¯¦æƒ…å¯¹è¯æ¡†ï¼ˆç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®ï¼Œæ‰“å¼€ RuntimeDetailDialogï¼Œä¼ é€’ runtimeUuid å‚æ•°ï¼ŒåŠ è½½è¿è¡Œè¯¦æƒ…æ•°æ®ï¼Œç”»å¸ƒèŠ‚ç‚¹æ ¹æ®çŠ¶æ€æ˜¾ç¤ºä¸åŒé¢œè‰²ï¼ˆæˆåŠŸ=ç»¿è‰²ã€å¤±è´¥=çº¢è‰²ã€æ‰§è¡Œä¸­=è“è‰²ï¼‰ï¼‰

#### èŠ‚ç‚¹æ‰§è¡Œè¯¦æƒ…å±•ç¤º

- [ ] T083 [US6] åœ¨ RuntimeDetailDialog ä¸­å®žçŽ°èŠ‚ç‚¹è¾“å…¥è¾“å‡ºå±•ç¤ºï¼ˆel-collapse-item æ¯ä¸ªèŠ‚ç‚¹ä¸€é¡¹ï¼Œå±•å¼€åŽæ˜¾ç¤ºï¼šèŠ‚ç‚¹æ ‡é¢˜ã€æ‰§è¡Œæ—¶é—´ï¼ˆstart_time â†’ end_timeï¼‰ã€æ‰§è¡ŒçŠ¶æ€ï¼ˆel-tagï¼‰ï¼Œel-descriptions æ˜¾ç¤ºè¾“å…¥æ•°æ®ï¼ˆæ¯ä¸ª NodeIOData ä¸€è¡Œï¼Œæ˜¾ç¤º nameã€titleã€typeã€valueï¼‰ï¼Œel-descriptions æ˜¾ç¤ºè¾“å‡ºæ•°æ®ï¼ˆæ ¼å¼åŒè¾“å…¥ï¼‰ï¼Œå¦‚æžœæ˜¯æ–‡æœ¬ç±»åž‹ä¸”å†…å®¹è¾ƒé•¿ï¼Œä½¿ç”¨ el-input type="textarea" åªè¯»æ¨¡å¼æ˜¾ç¤ºï¼Œå¦‚æžœæ˜¯æ–‡ä»¶ç±»åž‹ï¼Œæ˜¾ç¤ºæ–‡ä»¶ URL åˆ—è¡¨ï¼ˆå¯ç‚¹å‡»ä¸‹è½½ï¼‰ï¼‰
- [ ] T084 [US6] åœ¨ RuntimeDetailDialog ä¸­å®žçŽ°èŠ‚ç‚¹é”™è¯¯ä¿¡æ¯å±•ç¤ºï¼ˆå¦‚æžœèŠ‚ç‚¹ status=FAILï¼Œel-alert type="error" æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼ˆstatusRemarkï¼‰ï¼Œé«˜äº®å¤±è´¥çš„èŠ‚ç‚¹ï¼ˆçº¢è‰²è¾¹æ¡†åŠ ç²—ï¼‰ï¼Œåœ¨èŠ‚ç‚¹è¯¦æƒ…ä¸­æ˜¾ç¤ºå®Œæ•´çš„é”™è¯¯å †æ ˆï¼ˆå¦‚æžœæœ‰ï¼‰ï¼Œæä¾›"é‡æ–°è¿è¡Œæ­¤å·¥ä½œæµ"æŒ‰é’®ï¼‰

#### åŽ†å²è®°å½•ç®¡ç†

- [ ] T085 [US6] åœ¨ WorkflowHistory ä¸­å®žçŽ°åˆ é™¤å•æ¡åŽ†å²è®°å½•ï¼ˆè¡¨æ ¼æ“ä½œåˆ—"åˆ é™¤"æŒ‰é’®ï¼ˆel-button type="text" icon="el-icon-delete"ï¼‰ï¼Œç‚¹å‡»åŽå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼Œç¡®è®¤åŽè°ƒç”¨ `$store.dispatch('workflowRuntime/deleteRuntimeHistory', runtimeUuid)`ï¼Œè°ƒç”¨åŽç«¯ API `/scm/ai/workflow/runtime/${runtimeUuid}` DELETEï¼ŒæˆåŠŸåŽåˆ·æ–°åˆ—è¡¨å¹¶æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯ï¼‰
- [ ] T086 [US6] åœ¨ WorkflowHistory ä¸­å®žçŽ°æ¸…ç©ºæ‰€æœ‰åŽ†å²è®°å½•ï¼ˆå·¥å…·æ "æ¸…ç©ºåŽ†å²è®°å½•"æŒ‰é’®ï¼ˆel-button type="danger"ï¼‰ï¼Œç‚¹å‡»åŽå¼¹å‡ºç¡®è®¤å¯¹è¯æ¡†ï¼ˆæç¤º"å³å°†åˆ é™¤æ‰€æœ‰è¿è¡Œè®°å½•ï¼Œæ­¤æ“ä½œä¸å¯æ¢å¤"ï¼‰ï¼Œç¡®è®¤åŽè°ƒç”¨åŽç«¯ API `/scm/ai/workflow/${wfUuid}/runtime/clear` DELETEï¼Œè¿”å›žåˆ é™¤æ•°é‡ï¼Œåˆ·æ–°åˆ—è¡¨æ˜¾ç¤ºç©ºçŠ¶æ€ï¼Œæ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯"å·²æ¸…ç©º XX æ¡åŽ†å²è®°å½•"ï¼‰

#### åŽ†å²è®°å½•ç»Ÿè®¡

- [ ] T087 [US6] åœ¨ WorkflowHistory ä¸­æ·»åŠ åŽ†å²è®°å½•ç»Ÿè®¡ä¿¡æ¯ï¼ˆé¡¶éƒ¨å¡ç‰‡ï¼ˆel-cardï¼‰æ˜¾ç¤ºç»Ÿè®¡æ•°æ®ï¼šæ€»è¿è¡Œæ¬¡æ•°ã€æˆåŠŸæ¬¡æ•°ã€å¤±è´¥æ¬¡æ•°ã€å¹³å‡æ‰§è¡Œæ—¶é•¿ï¼Œä½¿ç”¨ el-statistic ç»„ä»¶æ˜¾ç¤ºæ•°å­—ï¼Œä½¿ç”¨ el-progress æ˜¾ç¤ºæˆåŠŸçŽ‡ï¼ˆtype="circle"ï¼‰ï¼Œæ ¹æ®åŽç«¯è¿”å›žçš„åŽ†å²è®°å½•åˆ—è¡¨è®¡ç®—ç»Ÿè®¡æ•°æ®ï¼‰

**Checkpoint**: æ­¤æ—¶æ‰€æœ‰ 6 ä¸ªç”¨æˆ·æ•…äº‹éƒ½åº”è¯¥å¯ç”¨ã€‚ç”¨æˆ·å¯ä»¥å®Œæ•´ä½¿ç”¨å·¥ä½œæµç³»ç»Ÿï¼ˆåˆ›å»ºã€é…ç½®ã€è¿è¡Œã€ç®¡ç†ã€è°ƒè¯•ï¼‰ã€‚

---

## Phase 9: Polish & Cross-Cutting Concerns (ä¼˜åŒ–ä¸Žå®Œå–„)

**Purpose**: å½±å“å¤šä¸ªç”¨æˆ·æ•…äº‹çš„æ”¹è¿›å’Œå®Œå–„

### æ ·å¼å’Œ UI ä¼˜åŒ–

- [ ] T088 [P] åœ¨ `src/components/70_ai/styles/workflow.scss` ä¸­å®Œå–„å·¥ä½œæµæ ·å¼ï¼ˆç»Ÿä¸€é¢œè‰²ä¸»é¢˜ï¼ˆä½¿ç”¨ Element UI ä¸»é¢˜è‰²ï¼‰ã€å®šä¹‰èŠ‚ç‚¹æ ·å¼å˜é‡ï¼ˆèŠ‚ç‚¹é¢œè‰²ã€è¾¹æ¡†ã€é˜´å½±ï¼‰ã€å®šä¹‰ç”»å¸ƒæ ·å¼ï¼ˆç½‘æ ¼èƒŒæ™¯ã€ç¼©æ”¾æŽ§åˆ¶æŒ‰é’®ï¼‰ã€å®šä¹‰é¢æ¿æ ·å¼ï¼ˆæŠ½å±‰ã€å¯¹è¯æ¡†ã€æŠ˜å é¢æ¿ï¼‰ã€å“åº”å¼å¸ƒå±€ï¼ˆæœ€å°å®½åº¦ 1200pxï¼‰ã€æš—è‰²æ¨¡å¼æ”¯æŒï¼ˆå¯é€‰ï¼‰ï¼‰
- [ ] T089 [P] ä¼˜åŒ–èŠ‚ç‚¹å›¾æ ‡å’Œè§†è§‰è®¾è®¡ï¼ˆä¸ºæ¯ä¸ªèŠ‚ç‚¹ç±»åž‹è®¾è®¡å›¾æ ‡ï¼ˆä½¿ç”¨ Element UI icon æˆ–è‡ªå®šä¹‰ SVGï¼‰ã€ç»Ÿä¸€èŠ‚ç‚¹å°ºå¯¸ï¼ˆ200x80ï¼‰ã€æ·»åŠ èŠ‚ç‚¹é˜´å½±å’Œæ¸å˜æ•ˆæžœã€è®¾è®¡è¿žçº¿æ ·å¼ï¼ˆåœ†è§’ã€ç®­å¤´ã€hover é«˜äº®ï¼‰ã€æ·»åŠ èŠ‚ç‚¹æ‹–æ‹½é¢„è§ˆæ•ˆæžœï¼‰
- [ ] T090 [P] ä¼˜åŒ–å·¥ä½œæµåˆ—è¡¨å’ŒåŽ†å²è®°å½• UIï¼ˆæ·»åŠ ç©ºçŠ¶æ€æç¤ºï¼ˆel-emptyï¼Œ"æš‚æ— å·¥ä½œæµ"ã€"æš‚æ— åŽ†å²è®°å½•"ï¼‰ã€ä¼˜åŒ–è¡¨æ ¼åˆ—å®½å’Œå¯¹é½ã€æ·»åŠ åŠ è½½åŠ¨ç”»ï¼ˆel-loadingï¼‰ã€ä¼˜åŒ–æŒ‰é’®å¸ƒå±€å’Œé—´è·ã€æ·»åŠ æ“ä½œç¡®è®¤åŠ¨ç”»ï¼‰

### æ€§èƒ½ä¼˜åŒ–

- [ ] T091 [P] ä¼˜åŒ– X6 ç”»å¸ƒæ€§èƒ½ï¼ˆå¤§è§„æ¨¡èŠ‚ç‚¹ï¼ˆ50+ï¼‰æ—¶å¯ç”¨è™šæ‹Ÿæ¸²æŸ“ã€ä¼˜åŒ–èŠ‚ç‚¹æ¸²æŸ“ï¼šä½¿ç”¨ SVG è€Œéž HTMLã€å»¶è¿ŸåŠ è½½èŠ‚ç‚¹é…ç½®é¢æ¿ã€é˜²æŠ–å¤„ç†ç”»å¸ƒç¼©æ”¾å’Œå¹³ç§»äº‹ä»¶ï¼ˆdebounce 100msï¼‰ã€ä½¿ç”¨ requestAnimationFrame ä¼˜åŒ–åŠ¨ç”»ï¼‰
- [ ] T092 [P] ä¼˜åŒ– SSE è¿žæŽ¥å’Œäº‹ä»¶å¤„ç†ï¼ˆå®žçŽ° SSE è‡ªåŠ¨é‡è¿žæœºåˆ¶ï¼ˆæœ€å¤š 3 æ¬¡ï¼Œé—´éš” 2 ç§’ï¼‰ã€ä¼˜åŒ–äº‹ä»¶å¤„ç†æ€§èƒ½ï¼ˆä½¿ç”¨ Map ç¼“å­˜èŠ‚ç‚¹çŠ¶æ€ï¼‰ã€å‡å°‘ä¸å¿…è¦çš„ Vuex commitï¼ˆæ‰¹é‡æ›´æ–°ï¼‰ã€ä¼˜åŒ–æµå¼è¾“å‡ºæ–‡æœ¬ç´¯ç§¯ï¼ˆä½¿ç”¨ StringBuilder æ¨¡å¼ï¼‰ï¼‰
- [ ] T093 [P] ä¼˜åŒ– Vuex çŠ¶æ€æ›´æ–°ï¼ˆå‡å°‘æ·±æ‹·è´æ“ä½œï¼ˆä½¿ç”¨ Object.assign æˆ–æ‰©å±•è¿ç®—ç¬¦ï¼‰ã€ä¼˜åŒ– nodes å’Œ edges æ•°ç»„æ›´æ–°ï¼ˆä½¿ç”¨ splice è€Œéž filterï¼‰ã€æ·»åŠ  Vuex çŠ¶æ€ç¼“å­˜ï¼ˆlocalStorage æŒä¹…åŒ–è‰ç¨¿ï¼‰ã€å®žçŽ°å·¥ä½œæµè‡ªåŠ¨ä¿å­˜ï¼ˆå»¶è¿Ÿ 5 ç§’ï¼Œé˜²æŠ–å¤„ç†ï¼‰ï¼‰

### é”™è¯¯å¤„ç†å’Œæ—¥å¿—

- [ ] T094 [P] å®Œå–„å…¨å±€é”™è¯¯å¤„ç†ï¼ˆåœ¨ main.js ä¸­æ·»åŠ å…¨å±€é”™è¯¯å¤„ç†å™¨ `Vue.config.errorHandler`ã€æ•èŽ·å·¥ä½œæµè¿è¡Œæ—¶é”™è¯¯å¹¶æ˜¾ç¤ºç”¨æˆ·å‹å¥½æ¶ˆæ¯ã€è®°å½•é”™è¯¯æ—¥å¿—åˆ°æŽ§åˆ¶å°ï¼ˆå¼€å‘æ¨¡å¼ï¼‰æˆ–æœåŠ¡å™¨ï¼ˆç”Ÿäº§æ¨¡å¼ï¼‰ã€æ·»åŠ é”™è¯¯è¾¹ç•Œç»„ä»¶é˜²æ­¢æ•´ä¸ªåº”ç”¨å´©æºƒï¼‰
- [ ] T095 [P] æ·»åŠ æ“ä½œæ—¥å¿—å’Œå®¡è®¡ï¼ˆè®°å½•å·¥ä½œæµå…³é”®æ“ä½œï¼ˆåˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ã€è¿è¡Œï¼‰ã€ä½¿ç”¨ console.log è®°å½•è°ƒè¯•ä¿¡æ¯ï¼ˆå¼€å‘æ¨¡å¼ï¼‰ã€ç§»é™¤ç”Ÿäº§çŽ¯å¢ƒçš„ console.logï¼ˆä½¿ç”¨ Webpack é…ç½®ï¼‰ã€æ·»åŠ æ€§èƒ½ç›‘æŽ§ï¼ˆè®°å½•å·¥ä½œæµæ‰§è¡Œæ—¶é—´ã€API è°ƒç”¨æ—¶é—´ï¼‰ï¼‰

### æ–‡æ¡£å’Œä»£ç è´¨é‡

- [ ] T096 [P] æ¸…ç†è°ƒè¯•æ—¥å¿—å’Œæ— ç”¨ä»£ç ï¼ˆåˆ é™¤æ‰€æœ‰ console.log è°ƒè¯•è¯­å¥ï¼ˆç”Ÿäº§çŽ¯å¢ƒï¼‰ã€åˆ é™¤æ³¨é‡ŠæŽ‰çš„ä»£ç ã€åˆ é™¤æœªä½¿ç”¨çš„å¯¼å…¥å’Œå˜é‡ã€ç»Ÿä¸€ä»£ç æ ¼å¼ï¼ˆè¿è¡Œ ESLint è‡ªåŠ¨ä¿®å¤ï¼‰ï¼‰
- [ ] T097 [P] æ·»åŠ ä»£ç æ³¨é‡Šå’Œæ–‡æ¡£ï¼ˆä¸ºå¤æ‚å‡½æ•°æ·»åŠ  JSDoc æ³¨é‡Šã€ä¸ºç»„ä»¶æ·»åŠ  Props å’Œ Events è¯´æ˜Žã€æ›´æ–° quickstart.mdï¼ˆæ·»åŠ å®žé™…ä½¿ç”¨ç¤ºä¾‹ï¼‰ã€åˆ›å»º README.mdï¼ˆå·¥ä½œæµåŠŸèƒ½è¯´æ˜Žã€ä½¿ç”¨æŒ‡å—ã€å¸¸è§é—®é¢˜ï¼‰ï¼‰
- [ ] T098 è¿è¡Œ ESLint æ£€æŸ¥å¹¶ä¿®å¤æ‰€æœ‰è­¦å‘Šå’Œé”™è¯¯ï¼ˆè¿è¡Œ `npm run lint`ï¼Œä¿®å¤æ‰€æœ‰ ESLint è­¦å‘Šå’Œé”™è¯¯ï¼Œç¡®ä¿ä»£ç ç¬¦åˆé¡¹ç›®è§„èŒƒï¼Œç‰¹åˆ«æ³¨æ„ï¼šæœªä½¿ç”¨çš„å˜é‡ã€ç¼ºå°‘ key çš„åˆ—è¡¨æ¸²æŸ“ã€ç¼ºå°‘ props éªŒè¯ï¼‰

### ç”¨æˆ·ä½“éªŒä¼˜åŒ–

- [ ] T099 [P] æ·»åŠ æ“ä½œå¼•å¯¼å’Œå¸®åŠ©æç¤ºï¼ˆä¸ºé¦–æ¬¡ä½¿ç”¨ç”¨æˆ·æ·»åŠ æ–°æ‰‹å¼•å¯¼ï¼ˆel-tour æˆ–è‡ªå®šä¹‰å¼•å¯¼ç»„ä»¶ï¼‰ã€åœ¨å…³é”®æ“ä½œå¤„æ·»åŠ  tooltip æç¤ºï¼ˆel-tooltipï¼‰ã€æ·»åŠ "å¸®åŠ©"æŒ‰é’®é“¾æŽ¥åˆ°æ–‡æ¡£ã€åœ¨ç©ºçŠ¶æ€æ·»åŠ æ“ä½œå»ºè®®ï¼ˆ"ç‚¹å‡»æ–°å»ºå·¥ä½œæµå¼€å§‹ä½¿ç”¨"ï¼‰ï¼‰
- [ ] T100 [P] ä¼˜åŒ–åŠ è½½çŠ¶æ€å’Œåé¦ˆï¼ˆæ‰€æœ‰ API è°ƒç”¨æ·»åŠ  loading çŠ¶æ€ï¼ˆel-loadingï¼‰ã€æ·»åŠ æ“ä½œæˆåŠŸ/å¤±è´¥çš„æ¶ˆæ¯æç¤ºï¼ˆel-messageï¼‰ã€æ·»åŠ æ“ä½œè¿›åº¦æ¡ï¼ˆä¿å­˜ã€è¿è¡Œç­‰é•¿æ—¶æ“ä½œï¼‰ã€ä¼˜åŒ–æŒ‰é’®ç¦ç”¨çŠ¶æ€ï¼ˆé˜²æ­¢é‡å¤ç‚¹å‡»ï¼‰ï¼‰
- [ ] T101 [P] æ·»åŠ é”®ç›˜å¿«æ·é”®æ”¯æŒï¼ˆä¿å­˜å·¥ä½œæµï¼šCtrl+Sã€åˆ é™¤èŠ‚ç‚¹/è¿žçº¿ï¼šDelete é”®ã€æ’¤é”€æ“ä½œï¼šCtrl+Zï¼ˆå¯é€‰ï¼‰ã€å¤åˆ¶èŠ‚ç‚¹ï¼šCtrl+C / Ctrl+Vï¼ˆå¯é€‰ï¼‰ã€å…¨é€‰ï¼šCtrl+Aï¼ˆå¯é€‰ï¼‰ã€åœ¨ç»„ä»¶ä¸­ç›‘å¬é”®ç›˜äº‹ä»¶å¹¶å¤„ç†ï¼‰

### æœ€ç»ˆéªŒè¯

- [ ] T102 æ ¹æ® quickstart.md éªŒè¯æ‰€æœ‰åŠŸèƒ½ï¼ˆæŒ‰ç…§ quickstart.md çš„æ­¥éª¤é€ä¸€æµ‹è¯•ã€éªŒè¯æ‰€æœ‰ç”¨æˆ·æ•…äº‹çš„æŽ¥å—åœºæ™¯ã€æ£€æŸ¥æ‰€æœ‰ Edge Cases æ˜¯å¦æ­£ç¡®å¤„ç†ã€éªŒè¯æ€§èƒ½æŒ‡æ ‡ï¼ˆç”»å¸ƒæ“ä½œ <200msã€èŠ‚ç‚¹çŠ¶æ€æ›´æ–° <500msï¼‰ã€éªŒè¯é”™è¯¯å¤„ç†ï¼ˆç½‘ç»œé”™è¯¯ã€API é”™è¯¯ã€éªŒè¯é”™è¯¯ï¼‰ï¼‰
- [ ] T103 è·¨æµè§ˆå™¨å…¼å®¹æ€§æµ‹è¯•ï¼ˆæµ‹è¯• Chrome æœ€æ–°ç‰ˆæœ¬ã€æµ‹è¯• Edge æœ€æ–°ç‰ˆæœ¬ã€æµ‹è¯• Firefox æœ€æ–°ç‰ˆæœ¬ã€éªŒè¯ X6 ç”»å¸ƒåœ¨å„æµè§ˆå™¨ä¸­æ­£å¸¸æ¸²æŸ“ã€éªŒè¯ SSE è¿žæŽ¥åœ¨å„æµè§ˆå™¨ä¸­æ­£å¸¸å·¥ä½œï¼‰

---

## Dependencies & Execution Order

### Phase Dependencies

- **Setup (Phase 1)**: æ— ä¾èµ– - å¯ä»¥ç«‹å³å¼€å§‹
- **Foundational (Phase 2)**: ä¾èµ– Setup å®Œæˆ - **é˜»å¡žæ‰€æœ‰ç”¨æˆ·æ•…äº‹**
- **User Stories (Phase 3-8)**: å…¨éƒ¨ä¾èµ– Foundational (Phase 2) å®Œæˆ
  - ç”¨æˆ·æ•…äº‹ä¹‹é—´å¯ä»¥å¹¶è¡Œå®žæ–½ï¼ˆå¦‚æžœæœ‰å›¢é˜Ÿèµ„æºï¼‰
  - æˆ–æŒ‰ä¼˜å…ˆçº§é¡ºåºä¾æ¬¡å®žæ–½ï¼ˆP1 â†’ P2 â†’ P3ï¼‰
- **Polish (Phase 9)**: ä¾èµ–æ‰€æœ‰éœ€è¦çš„ç”¨æˆ·æ•…äº‹å®Œæˆ

### User Story Dependencies

- **User Story 1 (P1)**: Foundational å®ŒæˆåŽå³å¯å¼€å§‹ - æ— å…¶ä»–ç”¨æˆ·æ•…äº‹ä¾èµ–
- **User Story 2 (P1)**: Foundational å®ŒæˆåŽå³å¯å¼€å§‹ - **ä¾èµ– User Story 1 çš„ WorkflowCanvas**
- **User Story 3 (P1)**: Foundational å®ŒæˆåŽå³å¯å¼€å§‹ - **ä¾èµ– User Story 1 å’Œ 2**ï¼ˆéœ€è¦ç”»å¸ƒå’ŒèŠ‚ç‚¹é…ç½®ï¼‰
- **User Story 4 (P2)**: Foundational å®ŒæˆåŽå³å¯å¼€å§‹ - **ä¾èµ– User Story 1**ï¼ˆéœ€è¦å·¥ä½œæµåˆ—è¡¨ï¼‰
- **User Story 5 (P2)**: Foundational å®ŒæˆåŽå³å¯å¼€å§‹ - **ä¾èµ– User Story 2**ï¼ˆéœ€è¦èŠ‚ç‚¹é…ç½®é¢æ¿ï¼‰
- **User Story 6 (P3)**: Foundational å®ŒæˆåŽå³å¯å¼€å§‹ - **ä¾èµ– User Story 3**ï¼ˆéœ€è¦å·¥ä½œæµè¿è¡ŒåŠŸèƒ½ï¼‰

### Within Each User Story

- å¸¸é‡å’Œ API æœåŠ¡ä¼˜å…ˆï¼ˆPhase 2 Foundationalï¼‰
- ç»„ä»¶æŒ‰ä¾èµ–é¡ºåºå®žæ–½ï¼šåŸºç¡€ç»„ä»¶ â†’ é«˜çº§ç»„ä»¶ â†’ é›†æˆ
- é…ç½®é¢æ¿åœ¨å¯¹åº”èŠ‚ç‚¹ç»„ä»¶ä¹‹åŽ
- æ ¸å¿ƒåŠŸèƒ½å®ŒæˆåŽå†è¿›è¡Œä¼˜åŒ–

### Parallel Opportunities

- **Phase 1 æ‰€æœ‰ä»»åŠ¡**: T001, T002, T003 å¯ä»¥å¹¶è¡Œ
- **Phase 2 æ ‡è®° [P] çš„ä»»åŠ¡**: T004, T005, T006, T007, T009, T010, T011, T012, T013, T014 å¯ä»¥å¹¶è¡Œ
- **Phase 3-8 æ¯ä¸ªç”¨æˆ·æ•…äº‹å†…æ ‡è®° [P] çš„ä»»åŠ¡**: å¯ä»¥åœ¨è¯¥æ•…äº‹å†…å¹¶è¡Œ
- **Phase 9 æ ‡è®° [P] çš„ä»»åŠ¡**: å¤§éƒ¨åˆ†ä¼˜åŒ–ä»»åŠ¡å¯ä»¥å¹¶è¡Œ

---

## Parallel Example: User Story 1

```bash
# Phase 2 å®ŒæˆåŽï¼ŒUser Story 1 çš„å¹¶è¡Œä»»åŠ¡ï¼š

# å¯ä»¥åŒæ—¶è¿›è¡Œï¼š
Task T017: "åˆ›å»ºå·¥ä½œæµåˆ—è¡¨ç»„ä»¶ WorkflowList.vue"
Task T020: "åˆ›å»ºèŠ‚ç‚¹åº“é¢æ¿ç»„ä»¶ NodeLibrary.vue"
Task T021: "åˆ›å»ºå¼€å§‹èŠ‚ç‚¹ç»„ä»¶ StartNode.vue"
Task T022: "åˆ›å»ºç»“æŸèŠ‚ç‚¹ç»„ä»¶ EndNode.vue"

# ä»¥ä¸Šä»»åŠ¡å®ŒæˆåŽå†è¿›è¡Œï¼š
Task T015: "åœ¨ chat ai å¼¹çª—ä¸­æ·»åŠ  workflow å›¾æ ‡æŒ‰é’®å…¥å£"
Task T016: "åˆ›å»ºå·¥ä½œæµä¸»å¼¹çª—ç»„ä»¶ WorkflowDialog.vue"
Task T019: "åˆ›å»ºå·¥ä½œæµç”»å¸ƒç»„ä»¶ WorkflowCanvas.vue"
```

---

## Implementation Strategy

### MVP First (ä»… User Story 1-3)

1. å®Œæˆ Phase 1: Setup
2. å®Œæˆ Phase 2: Foundationalï¼ˆ**å…³é”®** - é˜»å¡žæ‰€æœ‰æ•…äº‹ï¼‰
3. å®Œæˆ Phase 3: User Story 1 - åˆ›å»ºå’Œè®¾è®¡å·¥ä½œæµ
4. å®Œæˆ Phase 4: User Story 2 - é…ç½®å·¥ä½œæµèŠ‚ç‚¹
5. å®Œæˆ Phase 5: User Story 3 - è¿è¡Œå’Œè°ƒè¯•å·¥ä½œæµ
6. **STOP and VALIDATE**: ç‹¬ç«‹æµ‹è¯•æ¯ä¸ªæ•…äº‹
7. å¦‚æžœå°±ç»ªåˆ™éƒ¨ç½²/æ¼”ç¤º

**MVP åŒ…å«çš„åŠŸèƒ½**:
- åˆ›å»ºå·¥ä½œæµã€æ‹–æ‹½èŠ‚ç‚¹ã€è¿žçº¿ã€ä¿å­˜
- é…ç½® LLM èŠ‚ç‚¹ã€çŸ¥è¯†æ£€ç´¢èŠ‚ç‚¹ç­‰åŸºç¡€èŠ‚ç‚¹
- è¿è¡Œå·¥ä½œæµã€æŸ¥çœ‹å®žæ—¶æ‰§è¡ŒçŠ¶æ€ã€æµå¼è¾“å‡º

### Incremental Delivery (å¢žé‡äº¤ä»˜)

1. å®Œæˆ Setup + Foundational â†’ åŸºç¡€è®¾æ–½å°±ç»ª
2. æ·»åŠ  User Story 1 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤ºï¼ˆå·¥ä½œæµè®¾è®¡å™¨ï¼‰
3. æ·»åŠ  User Story 2 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤ºï¼ˆèŠ‚ç‚¹é…ç½®ï¼‰
4. æ·»åŠ  User Story 3 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤ºï¼ˆå·¥ä½œæµè¿è¡Œï¼‰**â† MVP å®Œæˆ**
5. æ·»åŠ  User Story 4 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤ºï¼ˆå·¥ä½œæµç®¡ç†ï¼‰
6. æ·»åŠ  User Story 5 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤ºï¼ˆé«˜çº§èŠ‚ç‚¹ï¼‰
7. æ·»åŠ  User Story 6 â†’ ç‹¬ç«‹æµ‹è¯• â†’ éƒ¨ç½²/æ¼”ç¤ºï¼ˆåŽ†å²è®°å½•ï¼‰
8. å®Œæˆ Phase 9: Polish â†’ æœ€ç»ˆä¼˜åŒ– â†’ æ­£å¼å‘å¸ƒ

æ¯ä¸ªæ•…äº‹éƒ½å¢žåŠ ä»·å€¼ï¼Œä¸ä¼šç ´åä¹‹å‰çš„æ•…äº‹ã€‚

### Parallel Team Strategy (å¹¶è¡Œå›¢é˜Ÿç­–ç•¥)

å¦‚æžœæœ‰å¤šä¸ªå¼€å‘è€…ï¼š

1. å›¢é˜Ÿä¸€èµ·å®Œæˆ Setup + Foundational
2. Foundational å®ŒæˆåŽï¼š
   - **Developer A**: User Story 1ï¼ˆå·¥ä½œæµè®¾è®¡å™¨ï¼‰
   - **Developer B**: User Story 2ï¼ˆèŠ‚ç‚¹é…ç½®ï¼‰+ User Story 5ï¼ˆé«˜çº§èŠ‚ç‚¹ï¼‰
   - **Developer C**: User Story 3ï¼ˆå·¥ä½œæµè¿è¡Œï¼‰+ User Story 6ï¼ˆåŽ†å²è®°å½•ï¼‰
   - **Developer D**: User Story 4ï¼ˆå·¥ä½œæµç®¡ç†ï¼‰+ Phase 9ï¼ˆä¼˜åŒ–ï¼‰
3. å„æ•…äº‹ç‹¬ç«‹å®Œæˆå’Œé›†æˆ

**æ³¨æ„**: User Story 2 å’Œ 3 ä¾èµ– User Story 1 çš„ WorkflowCanvasï¼Œéœ€è¦ç­‰å¾… T019 å®Œæˆã€‚

---

## Notes

- **[P] æ ‡è®°**: è¡¨ç¤ºä»»åŠ¡å¤„ç†ä¸åŒæ–‡ä»¶ï¼Œæ— ä¾èµ–ï¼Œå¯ä»¥å¹¶è¡Œæ‰§è¡Œ
- **[Story] æ ‡è®°**: å°†ä»»åŠ¡æ˜ å°„åˆ°å…·ä½“çš„ç”¨æˆ·æ•…äº‹ï¼Œä¾¿äºŽè¿½æº¯
- **æ¯ä¸ªç”¨æˆ·æ•…äº‹åº”è¯¥ç‹¬ç«‹å¯å®Œæˆå’Œæµ‹è¯•**: ä¸è¦åˆ›å»ºè·¨æ•…äº‹çš„å¼ºä¾èµ–
- **åœ¨å®žæ–½å‰éªŒè¯**: ç¡®ä¿ç†è§£ä»»åŠ¡éœ€æ±‚å’Œæ–‡ä»¶è·¯å¾„
- **æ¯ä¸ªä»»åŠ¡æˆ–é€»è¾‘ç»„åŽæäº¤ä»£ç **: ä¿æŒå°æ­¥å¿«è·‘
- **åœ¨æ¯ä¸ªæ£€æŸ¥ç‚¹åœæ­¢éªŒè¯**: ç‹¬ç«‹æµ‹è¯•æ¯ä¸ªæ•…äº‹
- **é¿å…**: æ¨¡ç³Šçš„ä»»åŠ¡ã€åŒä¸€æ–‡ä»¶å†²çªã€ç ´åç‹¬ç«‹æ€§çš„è·¨æ•…äº‹ä¾èµ–
- **ä¸¥æ ¼éµå¾ª aideepin åŽŸé€»è¾‘**: ä¸è¿›è¡Œè‡†æƒ³æˆ–è¿‡åº¦è®¾è®¡ï¼Œå‚è€ƒ aideepin æºç å®žçŽ°

---

## Task Summary

**Total Tasks**: 103
**By Phase**:
- Phase 1 (Setup): 3 tasks
- Phase 2 (Foundational): 11 tasks
- Phase 3 (User Story 1): 13 tasks
- Phase 4 (User Story 2): 14 tasks
- Phase 5 (User Story 3): 11 tasks
- Phase 6 (User Story 4): 8 tasks
- Phase 7 (User Story 5): 18 tasks
- Phase 8 (User Story 6): 9 tasks
- Phase 9 (Polish): 16 tasks

**By User Story**:
- User Story 1 (P1): 13 tasks
- User Story 2 (P1): 14 tasks
- User Story 3 (P1): 11 tasks
- User Story 4 (P2): 8 tasks
- User Story 5 (P2): 18 tasks
- User Story 6 (P3): 9 tasks
- Setup & Foundational: 14 tasks
- Polish: 16 tasks

**Parallel Opportunities**: 45 tasks marked [P] can run in parallel within their phase/story

**Independent Test Criteria**: Each user story has clear acceptance criteria for independent testing

**Suggested MVP Scope**: User Stories 1, 2, 3 (38 tasks + 14 foundational tasks = 52 tasks total for MVP)

---

**Format Validation**: âœ… All 103 tasks follow the checklist format:
- Checkbox: `- [ ]`
- Task ID: Sequential (T001-T103)
- [P] marker: Present for 45 parallelizable tasks
- [Story] label: Present for all user story tasks (73 tasks)
- File paths: Included in all task descriptions

**Generated**: 2025-10-21
**Feature Branch**: `001-ai-workflow-migration`
**Next Step**: Begin implementation with Phase 1 (Setup) tasks
